sch.TEMPLATES = JSON.parse(`{"":"","ARRAY":"<style>/**/</style>\\t\\t<%_.each(data[source], function(row, indx){%>\\n            <%_.each(fields, function(f){%>\\n                <%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n            <%})%>\\n \\t\\t<%})%>\\n\x3Cscript>/**/\x3C/script>","BS_BUTTON":"<style><%var id_ = addAction('button', data, null, getProperty(data, source_action, action))%>\\n#<%=id_%>{\\n  padding-left:10px;\\n}</style>\\t<button type=\\"button\\" class=\\"btn btn-default <%=getProperty(data, source_css, css)%> u-butt\\" \\n\\tid = \\"<%=id_%>\\"\\n\\ttitle = \\"<%=tooltip%> <%=getSource(data, source_tooltip)%>\\">\\n\\t  <span class=\\"<%=icon%> <%=getSource(data, source_icon)%>\\"></span> <%=title%> <%=getSource(data, source_title)%>\\n\\t</button>\\n","BS_CHECK":"<style>/*#{\\n\\tpadding-left:10px;\\n}*/</style><%\\n   function getIcon(data){\\n   \\t\\tif(data){\\n   \\t\\t\\treturn \\"glyphicon glyphicon-check\\";\\n   \\t\\t}else{\\n   \\t\\t\\treturn \\"glyphicon glyphicon-unchecked\\";\\n   \\t\\t}\\n   }\\n   function getView(data){\\n   \\t\\tif(data){\\n   \\t\\t\\treturn \\"btn btn-default\\";\\n   \\t\\t}else{\\n   \\t\\t\\treturn \\"\\";\\n   \\t\\t}\\n   }\\n%>\\n  \\n<%var id_ = addAction('button', data, source, action||\\"check_\\")%>\\n  \\n<span id = \\"<%=id_%>\\" class=\\"<%=getView(as_button)%> <%=getIcon(getSource(data, source))%>\\" \\t\\n\\ttitle = \\"<%=tooltip%> <%=getSource(data, source_tooltip)%>\\">\\n\\t<%=title%> <%=getSource(data, source_title)%>\\n</span>\\n\x3Cscript>var form = sch.Forms[sch.currentFormId];\\n\\nsetTimeout(function(){ \\n  $(\\"#<%=id_%>\\").click(function(){\\n    \\n    //var id_ = $(this).attr(\\"val\\");\\n    //console.log(form.actions);\\n    var a = _.find(form.actions, function(act){\\n      // console.log(act.id);\\n      return (act.id == \\"<%=id_%>\\");\\n    });\\n    if(a){\\n      if(a.action == \\"<%=action%>\\"||\\"check_\\"){\\n          a.data[\\"<%=source%>\\"] = eval(!a.data[\\"<%=source%>\\"]);\\n        if(a.data[\\"<%=source%>\\"]){\\n           $(this).addClass('glyphicon glyphicon-check');\\n          $(this).removeClass('glyphicon-unchecked');\\n       }else{\\n          $(this).addClass('glyphicon glyphicon-unchecked');\\n          $(this).removeClass('glyphicon-check');\\n        }\\n      }\\n    }\\n  });\\n},0);\x3C/script>","BS_DIALOG":"<style>#<%=dialog_id%>-form{\\n  width:<%=width%>;\\n}</style>  <div id = \\"<%=dialog_id%>-form\\" class = \\"panel panel-default  <%=getProperty(data, source_css, css)%> mod-dialog\\">\\n\\t\\t<div class = \\"panel-heading panel-title-ok\\" style= \\"min-heigth: 20px; padding-bottom:5px;\\">\\n\\t\\t\\t<div class = \\"panel-buttons\\">\\n \\t\\t\\t  <button type=\\"button\\" class=\\"btn btn-default\\"> \\n               <span class=\\"glyphicon glyphicon-remove gray\\"\\n                      id = \\"close-dialog-<%=dialog_id%>\\"\\n                      title = \\"Закрыть\\"></span>\\n              </button>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class = \\"bs-panel-title-row\\">\\n\\t\\t\\t\\t<div class = \\"bs-panel-title bs-panel-title-cell\\">\\n\\t\\t\\t\\t\\t<h3 class = \\"\\"><%=title%> <%=data[source_title]%></h3>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class = \\"panel-body\\">\\n\\t\\t\\t<div class=\\"row\\">\\n              <div id=\\"<%=dialog_id%>\\">\\n               </div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\x3Cscript>$('#<%=dialog_id%>-form').draggable({containment: \\"window\\",revertDuration: 0}).filter('body').draggable(\\"option\\", \\"axis\\");\\n$(\\"#close-dialog-<%=dialog_id%>\\").click(function(){\\n  $(\\"#<%=dialog_id%>-form\\").css(\\"display\\", \\"none\\");\\n  $('#background').css('display','none');\\n});\\n\x3C/script>","BS_PANEL":"<%\\n  var form = sch.Forms[sch.currentFormId];\\n   \\n  function isTopHeading(isTop){\\n\\tif(eval(isTop))return 'top-sub-navbar';\\n  };\\n   \\n  function isTopHeadingB(isTop){\\n      if(eval(isTop))return 'style = \\"margin-top:40px\\"';\\n  };\\n%>\\n  <div id = \\"\\" class = \\"panel <%=getProperty(data, source_css, css)%>\\">\\n    <%if(!hide_header){%>\\n          <div class = \\"panel-heading panel-title-ok <%=isTopHeading(is_top_navbar)%>\\">\\n\\t\\t\\t<div class = \\"panel-buttons\\">\\n\\t\\t\\t\\t<%_.each(buttons, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n\\t\\t\\t</div>\\n\\t\\t\\t<div class = \\"bs-panel-title-row\\">\\n\\t\\t\\t\\t<div class = \\"bs-panel-title bs-panel-title-cell\\">\\n\\t\\t\\t\\t\\t<h3 class = \\"\\"><%=title%> <%=getSource(data, source_title)%></h3>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t  </div>\\n    <%}%>\\n\\t\\t<div class = \\"panel-body \\" <%=isTopHeadingB(is_top_navbar)%> >\\n\\t\\t\\t<div class=\\"\\">\\n\\t\\t\\t\\t<%_.each(fields, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n","BS_SELECT_LIST":"<style>/**/\\n</style>\\t<select id = \\"<%=addAction('text', data, source)%>\\"\\n\\tclass = \\"select-template\\" title = \\"<%=title%>\\"  style=\\"font-size:<%=font_size%>px\\">\\n\\t\\t<%_.each(Object.keys(getSource(data, source_list)), function(k){%>\\n\\t\\t<option <%=getSelected(getSource(data, source), k)%> value=\\"<%=k%>\\">\\n\\t\\t<%=getSource(data, source_list)[k]%>\\n\\t\\t</option>\\n\\t\\t<%})%>\\n\\t</select>\\n","BS_TEXT":"<style><%var id_ = addAction('text', data, source)%>\\n#group-<%=id_%>, #group-<%=id_%> .input-group-sm{\\n  <%if(width){%>\\n    width: <%=width%>;  \\n    <%}%>\\n}\\n#<%=id_%> h5{\\n  color:red;\\n}\\n#<%=id_%>{\\n  padding-left:10px;\\n  <%if(getRequired(required)){%>\\n    background-color: #eaaaaa;\\n    <%}%>\\n  <%if(width){%>\\n    width: <%=width||\\"100%\\"%>;  \\n    <%}%>\\n}\\n#<%=id_%>:focus{\\n  background-color: #faf1a8;\\n}\\n#clear-<%=id_%>{\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n  z-index: 10;\\n  opacity: 0;\\n}\\n#clear-<%=id_%>:hover{\\n  opacity: 1;\\n}</style><%\\n   function getRequired(isReq){\\n     if(eval(isReq)){\\n   \\t\\treturn \\"glyphicon glyphicon-asterisk warning\\";\\n     }else{\\n   \\t\\treturn \\"\\";\\n     }\\n   }\\n%>\\n   <div  id = \\"group-<%=id_%>\\"class=\\"inline\\">\\n\\t\\t<div class=\\"input-group  input-group-sm\\">\\n\\t\\t\\t<input id = \\"<%=id_%>\\" type=\\"text\\" placeholder=\\"<%=placeholder%>\\" \\n\\t\\t\\tvalue=\\"<%=getSource(data, source)%>\\">\\n          \\n\\t\\t\\t<span class=\\"input-group-btn\\">\\n\\t\\t\\t\\t<a id = \\"clear-<%=id_%>\\" class=\\"btn btn-default\\"><span class=\\"glyphicon glyphicon-remove bs-search-box-glyphicon\\"></span></a>\\n\\t\\t\\t</span>\\n\\t\\t</div>\\n\\t\\t<h5></h5>\\n\\t</div>\\t\\n\x3Cscript>setTimeout(function(){ \\n  \\n  $(\\"#<%=id_%>\\").mask(\\"<%=mask%>\\");\\n  \\n\\n  $(\\"#clear-<%=id_%>\\").click(function(){\\n    $(\\"#<%=id_%>\\").val(\\"\\");\\n    $(\\"#<%=id_%>\\").focus();\\n    $(\\"#<%=id_%>\\").trigger(\\"change\\");\\n  });\\n  \\n},1);\x3C/script>","BUTTON_GROUP":"\\t\\t<%function getOrient(isVert){if(isVert){return \\"-vertical\\";}};%>\\n          <div class=\\"btn-group<%=getOrient(vertical)%>\\">\\n\\t\\t\\t<%_.each(fields, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n\\t\\t</div>\\n","CANON":"<%\\n   function getRequired(isReq){\\n     if(isReq){\\n   \\t\\treturn \\"glyphicon glyphicon-remove danger\\";\\n     }else{\\n   \\t\\treturn \\"\\";\\n     }\\n   }\\n%>\\n  \\n  \\n  \\n  \\n<span  class = \\"getRequired(required)\\">\\n  <textarea id = \\"<%=id_%>\\"><%=getSource(data, source)%>\\n  ","CODEMIRROR":"<style>\\ttype: \\"CODEMIRROR\\",\\n\\tlabel: \\"\\",\\n\\ttitle: \\"\\", \\n\\tcm_name: \\"\\",\\n\\tmode: \\"\\",\\n\\tsource: \\"\\",\\n</style> \\t<%var id_= addAction('text', data, source)%>\\n\\t<textarea id = \\"<%=id_%>\\"><%=temlateUnScr(getSource(data, source))%></textarea>\\n\x3Cscript>\\tvar <%=cm_name%> = CodeMirror.fromTextArea(document.getElementById(\\"<%=id_%>\\"), {\\n\\t\\tlineNumbers: true,\\n\\t\\tmatchBrackets: true,\\n\\t\\tmode: \\"<%=mode%>\\"\\n\\t});\\n\x3C/script>","CONSTRUCTOR":"<style>/*MIX_TABLE*/\\n.mix-link {\\n    background-color: #d9d6d6;\\n    cursor: pointer;\\n    padding: 5px;\\n    border-radius: 5px;\\n}\\n.mix-link:hover{\\n\\tbackground-color: gray;\\n\\tcursor:pointer;\\n\\tcolor:white;\\n}\\n.mix-cell{\\n    padding: 5px;\\n    border-radius: 5px;\\n    background-color: white;\\t\\n}</style>\\t <% var tblId = addAction('table', null, null, null)%>\\n\\t<table id = \\"<%=tblId%>\\" class = \\"table table-hover table-condensed\\">\\n      <tbody>\\n\\n\\t\\t<%_.each(data[source], function(row, indx){if(!data[source][indx].hidden){%>\\n\\t\\t<% var trId = addAction('button', data[source][indx], source, action)%>\\n          <tr id = \\"<%=trId%>\\" class = \\"<%=tblId%>-row <%=getActive(data[source][indx].ACTIVE)%>\\">\\n            <%_.each(fields, function(f){%>\\n              <td> \\n                <%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n              </td>\\n            <%})%>\\n           </tr> \\n\\n\\t\\t<%}})%>\\n\\n\\t</tbody></table>\\n\\n","DATE":"<input type = \\"date\\" id = \\"<%=addAction('text', data, source)%>\\" \\tvalue = \\"<%=data[source]%>\\"/>","DIALOG":"<style>#<%=dialog_id%>-form{\\n  width:<%=width%>;\\n  max-width:900px;\\n}</style>  <div id = \\"<%=dialog_id%>-form\\" class = \\"panel panel-default mod-dialog\\">\\n\\t\\t<div class = \\"panel-heading panel-title-ok\\" style= \\"min-heigth: 20px; padding-bottom:5px;\\">\\n\\t\\t\\t<div class = \\"panel-buttons\\">\\n \\t\\t\\t  <button type=\\"button\\" class=\\"btn btn-default\\"> \\n               <span class=\\"glyphicon glyphicon-remove gray\\"\\n                      id = \\"close-dialog-<%=dialog_id%>\\"\\n                      title = \\"Закрыть\\"></span>\\n              </button>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class = \\"bs-panel-title-row\\">\\n\\t\\t\\t\\t<div class = \\"bs-panel-title bs-panel-title-cell\\">\\n\\t\\t\\t\\t\\t<h3 class = \\"\\"><%=title%> <%=data[source_title]%></h3>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class = \\"panel-body\\">\\n\\t\\t\\t<div class=\\"row\\">\\n              <div id=\\"<%=dialog_id%>\\">\\n               </div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\x3Cscript>$(\\"#close-dialog-<%=dialog_id%>\\").click(function(){\\n  $(\\"#<%=dialog_id%>-form\\").css(\\"display\\", \\"none\\");\\n  $('#background').css({'display':'none', 'z-index': '0'});\\n});\x3C/script>","DIV":"<style>#div-<%=id%>, #<%=div_id||\\"div\\"%>{\\n  text-align: <%=text_align%>;\\n  overflow-y: <%=overflow%>;\\n  overflow-x: hidden;  \\n  max-height:<%=height%>;\\n  width:<%=width%>;\\n  margin:<%=margin%>;\\n  padding:<%=padding%>;\\n}</style><%\\n   function getId(div_id, id){\\n   \\t\\treturn div_id||'div-'+id;\\n   }\\n%>\\n<div id = \\"<%=getId(div_id, id)%>\\" class =\\"<%=css%>\\">\\n  <%_.each(fields, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n</div>\\n","FORM":"<style>/**/\\n\\t</style><div id = \\"<%=addInnerForm(form_id, form_code, params)%>\\" class= \\"form\\"></div>\\n","GRID_SECTION":"<style>/*.row{\\n  margin:0 0 5px 0;\\n}*/</style><div class=\\"row\\">\\n  <%_.each(fields, function(f, indx){%>\\n      <%if(f.grid_start_new_row){%>\\n        </div>\\n        <div class=\\"row\\">\\n      <%}%>\\n    <%if(f.grid_label_cols && f.grid_label_cols !== 0){%>\\n      <div class=\\"col-md-<%=f.grid_label_cols%>\\" style = \\"text-align: right;\\">\\n        <%=f.label%>\\n        <%if(f.required){%>\\n          <label class=\\"uRequired \\"><sup><span class=\\"glyphicon glyphicon-asterisk warning\\"></span></sup></label>\\n        <%}%>\\n      </div>\\n    <%}%>\\n      <div class=\\"col-md-<%=f.grid_field_cols%>\\">\\n        <%=getItem2(f, path)%>\\n       </div>\\n  <%})%>\\n</div> \\n","HORISONT_LIST":"<style>#hl-row-<%=id%>{\\n  text-align: <%=text_align%>;\\n}\\n#hl-<%=id%>{\\n  border-spacing: 10px 0px; /* промежуток между ячейками таблицы (первое значение - горизонтальный, второе вертикальный)*/\\t\\n}</style>   <table  id = \\"hl-<%=id%>\\">\\n     <tbody>\\n\\t\\t<tr id = \\"hl-row-<%=id%>\\">\\n          <%_.each(getSource(data, source), function(row, indx){%>\\n            <%_.each(fields, function(f){%>\\n              <td>\\n                <%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n              </td>\\n            <%})%>\\n \\t\\t  <%})%>\\n        </tr>\\n     </tbody>\\n   </table>\\n","HORISONT_SPLITTER":"<style>#hr-<%=id%>{\\n  margin:<%=margin%>;\\n  border-top:<%=border-top%>;\\n}</style><%\\n   function getId(id){\\n   \\t\\treturn 'hr-'+id;\\n   }\\n%>\\n  <hr id = \\"<%=getId(id)%>\\">\\n","MIX_TABLE":"<style><% var tblId = addAction('table', null, null, null)%>\\n/*MIX_TABLE*/\\n#<%=tblId%> th, #<%=tblId%> td{\\n  text-align:center;\\n}\\n.hor-head, .vert-head, .main-head {\\n    cursor: pointer;\\n}\\n.hor-head:hover, .vert-head:hover, .main-head:hover {\\n    border-style: ridge;\\n    background-color: grey;\\n    color: #ffc107;\\n    border-color: #ffc107;\\n}\\n.mix-link {\\n  cursor: pointer;\\n  padding: 5px;\\n  border-radius: 5px;\\n}\\n.mix-link:hover{\\n }\\n.mix-cell{\\n  padding: 5px;\\n  background-color: white;\\t\\n}</style>\\t <%function getLink(row, col){\\n            var respClass = \\"glyphicon-x2\\";\\n                var checked_ = \\"uncheck\\";\\n  \\t\\t\\t\\tvar date = form.params.DATE_CHANGE||new Date();\\n                var dateTooltip = \\"\\";\\n            var id_ = \\"\\";\\n            var search_1 = _.find(data[source_links_1], function(link){\\n\\t\\t\\t\\treturn ((parseInt(link[link_row]) == row) && (parseInt(link[link_col]) == col));\\n\\t\\t\\t});\\n            if(search_1){\\n                var search_2;\\n                _.each(data[source_links_2], function(link){\\n                    if ((parseInt(link[link_row]) == row) && (link[link_col] == col) && (link[curr_link_val] == data[curr_link_val]) && isActive_(link, date)){search_2 = link;}\\n                });\\n                respClass += \\" mix-link\\";\\n                if(search_2){\\n                \\trespClass += \\" glyphicon glyphicon-ok green\\";\\n               \\t    checked_ = \\"check\\";\\n                \\tdateTooltip = getReadDate(new Date(search_2.DATE_START))+\\"-\\"+getReadDate(new Date(search_2.DATE_END));\\n                \\tid_ = addAction('button', search_2, null, 'del-link');\\n                }else{\\n                \\trespClass += \\" glyphicon glyphicon-minus gray\\";\\n               \\t    checked_ = \\"uncheck\\";\\n                \\tdateTooltip = \\"\\";\\n                 \\tid_ = addAction('button', {[link_row]: row, [link_col]: col, [curr_link_val]: data[curr_link_val]}, null, 'add-link');\\n               }\\n            }else{\\n                \\trespClass += \\" mix-cell glyphicon glyphicon-minus white\\";\\n            }\\n       \\t\\treturn '<span id = \\"'+id_+'\\" class = \\"'+respClass+'\\"  x = \\"'+row+'\\" y = \\"'+col+'\\" ch = \\"'+checked_+'\\" title = \\"'+dateTooltip+'\\"></span>';        \\n     }%>\\n\\t \\n\\t<table id = \\"<%=tblId%>\\" class = \\"table table-hover table-condensed\\">\\n       <thead>\\n\\t\\t<tr id = \\"\\" >\\n\\t\\t\\t\\t<th rowspan=\\"2\\" class= \\"main-head\\"  title = \\"Включить/выключить все связи\\"><%=head_rows%></th>\\n                <th colspan=\\"<%=data[source_rows].length%>\\"  class= \\"main-head\\"  title = \\"Включить/выключить все связи\\"><%=head_cols%></th>\\n \\t\\t</tr>\\n\\t\\t<tr>\\n                <%_.each(data[source_rows], function(row, indx_row){%><th class= \\"hor-head\\" head =\\"\\" x = \\"<%=row[val_row]%>\\" title = \\"Включить/выключить весь класс\\"><%=row[h_row]%></th><%})%> \\n\\t\\t</tr>\\n\\t  </thead>\\n      <tbody>\\n\\n\\t\\t<%_.each(data[source_cols], function(col, indx_col){%>\\n         <tr>\\n           <td class= \\"vert-head\\" head =\\"\\" y = \\"<%=col[val_col]%>\\" title = \\"Включить/выключить весь предмет\\"><%=col[h_col]%></td>\\n            <%_.each(data[source_rows], function(row, indx_row){%>\\n                 <td><%= getLink(row[val_row], col[val_col])%></td>\\n            <%})%>\\n         </tr> \\n\\t\\t<%})%>\\n\\n\\t  </tbody>\\n    </table>\\n\\n\x3Cscript>var form = sch.Forms[sch.currentFormId];\\n\\nsetTimeout(function(){ \\n  form.data.MEMORY_LINKS = [];\\n  $(\\".mix-link\\").each(function(i,r){\\n    form.data.MEMORY_LINKS.push({INDX:i, CHECKED: $(r).attr(\\"ch\\")});\\n  });\\n  $(\\".main-head\\").click(function(){\\n    var ch = $(this).attr(\\"ch\\");\\n    $(\\".mix-link\\").each(function(i,r){ \\n      if(ch == \\"check\\"){\\n        $(r).attr('ch', \\"uncheck\\");\\n        $(r).addClass('glyphicon-minus gray');\\n        $(r).removeClass('glyphicon-ok green');\\n      }else{\\n        $(r).attr('ch', \\"check\\");\\n        $(r).addClass('glyphicon-ok green');\\n        $(r).removeClass('glyphicon-minus gray');\\n      }\\n    });\\n    if($(this).attr(\\"ch\\") == \\"check\\"){\\n      $(this).attr(\\"ch\\", \\"uncheck\\");\\n    }else{\\n      $(this).attr(\\"ch\\", \\"check\\");\\n    }\\n  });\\n\\n  $(\\".hor-head\\").click(function(){\\n    var x = $(this).attr(\\"x\\");\\n    var ch = $(this).attr(\\"ch\\");\\n    $(\\".mix-link\\").each(function(i,r){ \\n      if(x == $(r).attr(\\"x\\")){\\n        if(ch == \\"check\\"){\\n          $(r).attr('ch', \\"uncheck\\");\\n          $(r).addClass('glyphicon-minus gray');\\n          $(r).removeClass('glyphicon-ok green');\\n        }else{\\n          $(r).attr('ch', \\"check\\");\\n          $(r).addClass('glyphicon-ok green');\\n          $(r).removeClass('glyphicon-minus gray');\\n        }\\n      }\\n    });\\n    if($(this).attr(\\"ch\\") == \\"check\\"){\\n      $(this).attr(\\"ch\\", \\"uncheck\\");\\n    }else{\\n      $(this).attr(\\"ch\\", \\"check\\");\\n    }\\n  });\\n\\n  $(\\".vert-head\\").click(function(){\\n    var y = $(this).attr(\\"y\\");\\n    var ch = $(this).attr(\\"ch\\");\\n    $(\\".mix-link\\").each(function(i,r){ \\n      if(y == $(r).attr(\\"y\\")){\\n        if(ch == \\"check\\"){\\n          $(r).attr('ch', \\"uncheck\\");\\n          $(r).addClass('glyphicon-minus gray');\\n          $(r).removeClass('glyphicon-ok green');\\n        }else{\\n          $(r).attr('ch', \\"check\\");\\n          $(r).addClass('glyphicon-ok green');\\n          $(r).removeClass('glyphicon-minus gray');\\n        }\\n      }\\n    });\\n    if($(this).attr(\\"ch\\") == \\"check\\"){\\n      $(this).attr(\\"ch\\", \\"uncheck\\");\\n    }else{\\n      $(this).attr(\\"ch\\", \\"check\\");\\n    }\\n  });\\n\\n  $(\\".mix-link\\").click(function(){\\n    var id_ = $(this).attr(\\"id\\");\\n    if($(this).attr(\\"ch\\") == \\"check\\"){\\n      $(this).attr('ch', \\"uncheck\\");\\n      $(this).addClass('glyphicon-minus gray');\\n      $(this).removeClass('glyphicon-ok green');\\n    }else{\\n      $(this).attr('ch', \\"check\\");\\n      $(this).addClass('glyphicon-ok green');\\n      $(this).removeClass('glyphicon-minus gray');\\n    }\\n  });\\n\\n  $('.mix-link').mouseover(function(){\\n    var x = $(this).attr(\\"x\\"); \\n    var y = $(this).attr(\\"y\\"); \\n    //console.log(x+\\"  \\"+y)\\n    $('[x=\\"'+x+'\\"][head]').css({'color': '#ffc107', 'border-style': 'ridge', 'background-color': 'grey', 'border-color': '#ffc107'});\\n    $('[y=\\"'+y+'\\"][head]').css({'color': '#ffc107', 'border-style': 'ridge', 'background-color': 'grey', 'border-color': '#ffc107'});\\n  });\\n\\n  $('.mix-link').mouseout(function(){\\n    var x = $(this).attr(\\"x\\"); \\n    var y = $(this).attr(\\"y\\"); \\n    $('[x=\\"'+x+'\\"][head]').css({'color': '', 'border-style': '', 'background-color': '', 'border-color': ''});\\n    $('[y=\\"'+y+'\\"][head]').css({'color': '', 'border-style': '', 'background-color': '', 'border-color': ''});\\n  });\\n\\n},100);\x3C/script>","OBJECT":"\\t<%_.each(fields, function(f, indx){%><%=getItem2(f, path+\\".\\"+source)%><%})%>\\n","PANEL":"<%\\n   function isTopHeading(isTop){\\n\\tvar form = sch.Forms[sch.currentFormId];\\n\\tif(eval(isTop))return 'top-sub-navbar';\\n  };\\n  function isTopHeadingB(isTop){\\n      var form = sch.Forms[sch.currentFormId];\\n      if(eval(isTop))return 'style = \\"margin-top:40px\\"';\\n  };\\n\\n   %>\\n  <div id = \\"\\" class = \\"panel panel-default <%=getProperty(data, source_css, css)%>\\">\\n          <div class = \\"panel-heading panel-title-ok <%=isTopHeading(is_top_navbar)%>\\">\\n\\t\\t\\t<div class = \\"panel-buttons\\">\\n\\t\\t\\t\\t<%_.each(buttons, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n\\t\\t\\t</div>\\n\\t\\t\\t<div class = \\"bs-panel-title-row\\">\\n\\t\\t\\t\\t<div class = \\"bs-panel-title bs-panel-title-cell\\">\\n\\t\\t\\t\\t\\t<h3 class = \\"\\"><%=title%> <%=getSource(data, source_title)%></h3>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t  </div>\\n\\t\\t<div class = \\"panel-body \\" <%=isTopHeadingB(is_top_navbar)%> >\\n\\t\\t\\t<div class=\\"row\\">\\n\\t\\t\\t\\t<%_.each(fields, function(f, indx){%><%=getItem2(f, path)%><%})%> \\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n","REPORT":"<style>.report-row{\\n    cursor: pointer;\\n}</style>\\t <% var tblId = addAction('table', null, null, null)%>\\n\\t<table id = \\"<%=tblId%>\\" class = \\"table table-hover table-condensed\\">\\n      <%if(eval(show_header||\\"true\\")){%><thead>\\n\\t\\t<tr id = \\"\\" >\\n\\t\\t\\t\\t<%_.each(fields, function(f, indx){%><td><%=f.label%></td><%})%> \\n\\t\\t</tr>\\n\\t  </thead>\\n      <%}%>\\n      <tbody>\\n\\n\\t\\t<%_.each(getSource(data, source), function(row, indx){if(!getSource(data, source)[indx].hidden){%>\\n\\t\\t<% var trId = addAction('button', getSource(data, source)[indx], source, action)%>\\n          <tr id = \\"<%=trId%>\\" class = \\"report-row <%=tblId%>-row <%=getActive(getSource(data, source)[indx].ACTIVE)%>\\">\\n            <%_.each(fields, function(f){%>\\n              <td> \\n                <%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n              </td>\\n            <%})%>\\n           </tr> \\n\\n\\t\\t<%}})%>\\n\\n\\t</tbody></table>\\n\\n\x3Cscript>setTimeout(function(){ \\n // alert(\\"<%=tblId%>-row\\");\\n  $(\\".<%=tblId%>-row\\").click(function(){\\n    $(\\".<%=tblId%>-row\\").each(function(i,r){\\n      $(r).removeClass(\\"selected\\")\\n    });\\n    $(this).addClass(\\"selected\\")\\n  });\\n},0);\x3C/script>","REPORT_DBL_LVL":"\\t <% var tblId = addAction('table', null, null, null)%>\\n\\t<table id = \\"<%=tblId%>\\" class = \\"\\">\\n      <%if(eval(show_header||\\"true\\")){%><thead>\\n\\t\\t<tr id = \\"\\" >\\n\\t\\t\\t\\t<%_.each(fields, function(f, indx){%><td><%=f.label%></td><%})%> \\n\\t\\t</tr>\\n\\t  </thead>\\n      <%}%>\\n      <tbody>\\n\\n\\t\\t<%_.each(data[source_cols], function(row1, indx1){if(!data[source_cols][indx1].hidden){%>\\n\\t\\t<% var trId = addAction('button', data[source_cols][indx1], source_cols, row_action)%>\\n          <tr id = \\"<%=trId%>\\" class = \\"report-row <%=tblId%>-row\\">\\n            <%_.each(row1[source_rows], function(row2, indx2){%>\\n              <td> \\n                <%_.each(fields, function(f){%>\\n                    <%=getItem2(f, path+\\".\\"+source_cols+\\"[\\"+indx1+\\"]\\"+\\".\\"+source_rows+\\"[\\"+indx2+\\"]\\")%>\\n                <%})%>\\n              </td>\\n            <%})%>\\n           </tr> \\n\\t\\t<%}})%>\\n\\n\\t</tbody></table>\\n\\n","SEARCH_BOX":"\\t<%var id_ = addAction('text', data, source)%>\\n\\t<div class=\\"inline\\">\\n\\t\\t<div class=\\"input-group  input-group-sm\\" style=\\"width:250px\\">\\n\\t\\t\\t<span class=\\"input-group-btn\\">\\n\\t\\t\\t\\t<a class=\\"btn btn-default c-button\\"><span class=\\"glyphicon glyphicon-search bs-search-box-glyphicon\\"></span></a>\\n\\t\\t\\t</span>\\n\\t\\t\\t<input id = \\"<%=id_%>\\" type=\\"text\\" \\n\\t\\t\\tclass=\\"form-control bs_search_box\\" value=\\"<%=getSource(data, source)%>\\" size=\\"100%\\" maxlength=\\"200\\" placeholder=\\"<%=placeholder%>\\" type=\\"text\\">\\n\\t\\t\\t<span class=\\"input-group-btn\\">\\n\\t\\t\\t\\t<a id = \\"clear-<%=id_%>\\" class=\\"btn btn-default\\"><span class=\\"glyphicon glyphicon-remove bs-search-box-glyphicon\\"></span></a>\\n\\t\\t\\t</span>\\n\\t\\t</div>\\n\\t</div>\\t\\n\x3Cscript>$(\\"#clear-<%=id_%>\\").click(function(){\\n  $(\\"#<%=id_%>\\").val(\\"\\");\\n  $(\\"#<%=id_%>\\").focus();\\n  $(\\"#<%=id_%>\\").trigger(\\"change\\");\\n});\x3C/script>","SELECT_LIST":"\\t<select id = \\"<%=addAction('text', data, source)%>\\"\\n\\tclass = \\"select-template\\">\\n\\t\\t<%_.each(Object.keys(eval(source_list)), function(k){%>\\n\\t\\t<option <%=getSelected(data[source], k)%> value=\\"<%=k%>\\">\\n\\t\\t<%=k%>\\n\\t\\t</option>\\n\\t\\t<%})%>\\n\\t</select>\\n","TEXT":"<style><%var id_ = addAction('text', data, source)%>\\n#group-<%=id_%>, #group-<%=id_%> .input-group-sm{\\n  <%if(width){%>\\n    width: <%=width%>;  \\n  <%}%>\\n}\\n#<%=id_%>{\\n  padding-left:10px;\\n  <%if(width){%>\\n    width: <%=width%>;  \\n  <%}%>\\n}\\n#<%=id_%>:focus{\\n  background-color: #faf1a8;\\n}\\n#clear-<%=id_%>{\\n    position: absolute;\\n    right: 0;\\n    top: 0;\\n    z-index: 10;\\n    opacity: 0;\\n}\\n#clear-<%=id_%>:hover{\\n    opacity: 1;\\n}</style>\\t<div  id = \\"group-<%=id_%>\\"class=\\"inline\\">\\n\\t\\t<div class=\\"input-group  input-group-sm\\">\\n\\t\\t\\t<input id = \\"<%=id_%>\\" type=\\"text\\" \\n\\t\\t\\tvalue=\\"<%=getSource(data, source)%>\\">\\n\\t\\t\\t<span class=\\"input-group-btn\\">\\n\\t\\t\\t\\t<a id = \\"clear-<%=id_%>\\" class=\\"btn btn-default\\"><span class=\\"glyphicon glyphicon-remove bs-search-box-glyphicon\\"></span></a>\\n\\t\\t\\t</span>\\n\\t\\t</div>\\n\\t</div>\\t\\n\x3Cscript>$(\\"#clear-<%=id_%>\\").click(function(){\\n  $(\\"#<%=id_%>\\").val(\\"\\");\\n  $(\\"#<%=id_%>\\").focus();\\n  $(\\"#<%=id_%>\\").trigger(\\"change\\");\\n});\x3C/script>","TEXT_AREA":"<style><%var id_ = addAction('text', data, source)%>\\n\\t#<%-id_%>{\\n\\t  padding-left:10px;\\n\\t  <%if(getRequired(required)){%>\\n\\t\\t\\tbackground-color: #eaaaaa;\\n\\t  <%}%>\\n\\t  <%if(width){%>\\n\\t\\twidth: <%=width||\\"100%\\"%>;  \\n\\t  <%}%>\\n\\t}\\n\\t#<%-id_%>:focus{\\n\\t  background-color: #faf1a8;\\n}</style><%\\n   function getRequired(isReq){\\n     if(eval(isReq)){\\n   \\t\\treturn \\"glyphicon glyphicon-asterisk warning\\";\\n     }else{\\n   \\t\\treturn \\"\\";\\n     }\\n   }\\n%>\\n<div><label class=\\"uRequired \\"><sup><span class=\\"<%-getRequired(required)%>\\"></span></sup></label>\\n  <textarea id = \\"<%-id_%>\\"><%-getSource(data, source)%></textarea>\\n</span></div>\x3Cscript>/**/\x3C/script>","TEXT_DISPLAY":"<style>/**/</style><span title = \\"<%=title%>\\"><%=text%><%=getSource(data, source)%></span>","TIME":"<style><%var id_ = addAction('text', data, source)%>\\n#group-<%=id_%>, #group-<%=id_%> .input-group-sm{\\n  <%if(width){%>\\n    width: <%=width%>;  \\n    <%}%>\\n}\\n#<%=id_%> h5{\\n  color:red;\\n}\\n#<%=id_%>{\\n  padding-left:10px;\\n  <%if(getRequired(required)){%>\\n    background-color: #eaaaaa;\\n    <%}%>\\n  <%if(width){%>\\n    width: <%=width||\\"100%\\"%>;  \\n    <%}%>\\n}\\n#<%=id_%>:focus{\\n  background-color: #faf1a8;\\n}\\n#clear-<%=id_%>{\\n  position: absolute;\\n  left: 0;\\n  height: 35px;\\n  top: 0;\\n  z-index: 10;\\n  opacity: 0;\\n}\\n#clear-<%=id_%>:hover{\\n  opacity: 1;\\n}</style><%\\n   function getRequired(isReq){\\n   if(eval(isReq)){\\n   return \\"glyphicon glyphicon-asterisk warning\\";\\n   }else{\\n   return \\"\\";\\n   }\\n   }\\n   %>\\n  <div  id = \\"group-<%=id_%>\\" title = \\"<%=tooltip%>\\" class=\\"inline\\">\\n    <div class=\\"input-group  input-group-sm\\">\\n      <input id = \\"<%=id_%>\\" type=\\"time\\"\\n             class=\\"text-field-time\\"\\n             value=\\"<%=getSource(data, source)%>\\">\\n    </div>\\n    <h5></h5>\\n  </div>\\t\\n\x3Cscript>//title = \\"<%=tooltip%>\\" \\nsetTimeout(function(){ \\n  \\n\\n  $(\\"#clear-<%=id_%>\\").click(function(){\\n    $(\\"#<%=id_%>\\").val(\\"\\");\\n    $(\\"#<%=id_%>\\").focus();\\n    $(\\"#<%=id_%>\\").trigger(\\"change\\");\\n  });\\n  \\n},1);\x3C/script>","TITLE":"<style>/**/</style><h<%=size%> title = \\"<%=title%>\\"><%=text%><%=getSource(data, source)%></h<%=size%>>","TRASH":"","TREE_REPORT":"  <%function getNode(row, path){\\n    return '<div class =\\"tree-lazy-indent tree-lazy-first-cell\\" style = \\"width:'+((row.LEVEL*15)+20)+'px;\\">'+getItem2({\\n      id : addAction('button', path, null, \\"hide-show\\"),\\n      condition: row.condition,\\n      ftype: \\"field\\",\\n      type: \\"BS_BUTTON\\",\\n      label: \\"\\",\\n      action: \\"hide-show\\", \\n      title: \\"\\", \\n      tooltip: row.TOOLTIP, \\n      icon: \\"\\", \\n      css: \\"bs_button_link btn-link btn-sm text-btn \\"+row.CSS,\\n      source: \\"\\", \\n      source_action: \\"\\", \\n      source_title: \\"\\",\\n      source_tooltip: \\"\\", \\n      source_icon: \\"\\",\\n      source_css: \\"\\",\\n      grid_start_new_row: \\"\\",\\n      grid_label_cols: \\"\\", \\n      grid_field_cols: \\"\\"\\n      },path\\n\\t)+'</div>';\\n}%>\\n\\n                \\n     <table><tbody>\\n\\n\\t\\t<%_.each(data[source], function(row, indx){if(data[source][indx].modified != \\"deleted\\" && data[source][indx].modified != \\"hide\\"){%>\\n\\t\\t  <%var ident = getNode(row, path+\\".\\"+source+\\"[\\"+indx+\\"]\\");%>\\t\\n          <tr id = \\"<%=addAction('button', data[source][indx], source, action)%>\\" class = \\"<%=getActive(data[source][indx].ACTIVE)%>\\">\\n            <%_.each(fields, function(f){%>\\n              <td> \\n                <%=ident%>\\n                  <div class =\\"tree-lazy-first-cell\\">\\n                  \\t<%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n                  </div>\\n                <%ident = \\"\\"%>\\n              </td>\\n            <%})%>\\n           </tr> \\n\\n\\t\\t<%}})%>\\n\\n\\t</tbody></table>\\n","UL":"<style>\\t ul ul li:hover{\\n\\t\\tbackground:#D43737;/*добавляем эффект при наведении*/\\n\\t}\\n</style><ul id = \\"<%=id%>\\">\\n  <%_.each(getSource(data, source), function(row, indx){%>\\n      <li id = \\"<%=addAction('button', row, null, action)%>\\" class=\\"<%=css%> <%=row[source_css]%>\\"><a><%=row[source_title]%></a>\\n      <%_.each(fields, function(f){%>\\n        <%=getItem2(f, path+\\".\\"+source+\\"[\\"+indx+\\"]\\")%>\\n      <%})%>\\n      </li>\\n  <%})%>\\n</ul>\\n","W_LESSON":"<style>.report-row{\\n    cursor: pointer;\\n}</style> <div id = \\"\\" class = \\"panel panel-default <%=getProperty(data, source_css, css)%>\\">\\n\\t  <div class = \\"panel-heading panel-title-ok\\">\\n\\t\\t<div class = \\"bs-panel-title-row\\">\\n\\t\\t\\t<div class = \\"bs-panel-title bs-panel-title-cell\\">\\n\\t\\t\\t\\t<h5 class = \\"\\"><%=title%> <%=data[source_title]%></h5>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t  </div>\\n\\t<div class = \\"panel-body \\">\\n\\t\\t<div class=\\"row\\">\\n              <% var tblId = addAction('table', null, null, null)%>\\n                <table id = \\"<%=tblId%>\\" class = \\"table table-hover table-condensed\\">\\n                  <tbody>\\n\\n                    <%_.each(data[source], function(row, indx){if(!data[source][indx].hidden){%>\\n                    <% var trId = addAction('button', data[source][indx], source, data[source][indx][source_action])%>\\n                      <tr id = \\"\\" class = \\"\\">\\n                          <td  class=\\"lesson-button-block\\"> \\n                            <span id = \\"<%=trId%>\\" class = \\"btn <%=data[source][indx][td_css_source]%> <%=tblId%>-report-row\\">\\n                              <%=data[source][indx][obj_source][text_source]%>\\n                            </span>    \\n                            <input type = \\"checkbox\\" id = \\"<%=tblId%>-<%=trId%>-check\\"/>\\n                          <%=getLessonInfo(data[source][indx], tblId+\\"-\\"+trId+\\"-lesson-info\\")%>\\n                          </td>\\n                       </tr> \\n \\n                    <%}})%>\\n \\n                </tbody></table>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\\n\x3Cscript>setTimeout(function(){ \\n // alert(\\"<%=tblId%>-row\\");\\n  $(\\".<%=tblId%>-report-row\\").mouseover(function(){\\n    $(\\"#<%=tblId%>-\\"+$(this).attr(\\"id\\")+\\"-lesson-info\\").css(\\"display\\", \\"block\\");\\n  });\\n  $(\\".<%=tblId%>-report-row\\").mouseout(function(){\\n    $(\\"#<%=tblId%>-\\"+$(this).attr(\\"id\\")+\\"-lesson-info\\").css(\\"display\\", \\"none\\");\\n  });\\n},0);\x3C/script>","W_MONTH_CALENDAR":"<style>/**/\\n.text li{font-size:10px; margin: 0; line-height: 15px;}\\n.text{\\n  z-index:1;\\n  /*white-space: pre-wrap;*/\\n  display:none; \\n  width:200px;\\n  min-height:10px;\\n  font-size:14px;\\t\\n  color:#333;\\n  border-style: solid;\\n  background-color: rgb(205, 236, 224);\\n}\\n</style><%function getArhClass(data){\\n           var resp = '';\\n           if(data && data.IS_ARHIVE){resp = resp+'class = \\"arhive-record\\" ' }\\n           return resp;\\n           }%>\\n  <%function getCnt(data){\\n             var resp = '';\\n             if(data && !data.ANY_MONTH){resp = data.SELECTED_LESSON_CNT}\\n             return resp;\\n             }%>\\n    <%function getMN(data){\\n               var resp = '';\\n               if(data && (data.CURRENT_MONTH || data.CURRENT_MONTH ==0)){\\n               resp =  getMonthName(data.CURRENT_MONTH)\\n               }\\n               return resp;\\n               }%>\\n      <%function getHeader(data){\\n                 var resp = '<tr class = \\"header\\"><td>пн</td><td>вт</td><td>ср</td><td>чт</td><td>пт</td><td>сб</td><td>вс</td></tr>';\\n                 if(data && data.IS_NULL_CALENDAR){resp = ''}\\n                 return resp;\\n                 }%>\\n        <div><%=getMN(data[source])%>\\n          <table id=\\"month-calendar\\"><tbody>\\n            <%=getHeader(data[source])%>\\n              <% var n = 0; for(var j = 0; j < data[source].ROWS.length/7; j++){%>\\n              <tr class = \\"calendar-row\\"><%for(var i = 0; i < 7; i++){%>\\n                <%if(!getRow(data[source].ROWS[n], \\"ANY_MONTH\\")){var id_ = addAction('button', data[source].ROWS[n], null, getProperty(data[source].ROWS[n], source_action, action))}%>\\n                  <td  id = \\"calendar-<%-getRow(data[source].ROWS[n], \\"FORMAT_DATE\\")%>\\" class = \\"calendar-date\\">\\n                    <div data-toggle=\\"tooltip\\" data-html = \\"true\\" id = <%=id_%> title=\\"\\" id=\\"<%-getRow(data[source].ROWS[n], \\"DATA\\")%>\\"\\n                    class = \\"cell <%=getRow(data[source].ROWS[n], \\"SELECTED\\")%>\\" day = \\"<%=getRow(data[source].ROWS[n], \\"DAY\\")%>\\">              \\n                    <%if((getRow(data[source].ROWS[n], \\"COMMENT\\")||(getCnt(data[source].ROWS[n]) > 0)) && !getRow(data[source].ROWS[n], \\"ANY_MONTH\\")){%><ul class = \\"text\\">\\n                      <li><%-getRow(data[source].ROWS[n], \\"COMMENT\\")%></li>\\n                      <li></li>\\n                      <%_.each(getSource(data[source].ROWS[n], \\"SERV_LIST\\"), function(row, indx){%>\\n                        <li><%=row.TIME%> - <%=row.SERV%> служащий - <%=row.SERVUS%></li>\\n                          <%})%></ul>\\n                          <%}%>\\n                            <b <%=getArhClass(data[source].ROWS[n])%>><%=getCnt(data[source].ROWS[n])%></b>\\n                            <a><%=getRow(data[source].ROWS[n], \\"DATE\\")%></a>\\n                              </div>\\n                            </td>\\n                          <% n++; }%>\\n                            </tr><%}%>\\n                          </tbody></table>\\n                          </div>\\n\x3Cscript>//25 str\\n/*\\n              <pre class ='text'><code><%-getRow(data[source].ROWS[n], \\"COMMENT\\")%><%-getRow(data[source].ROWS[n], \\"COMMENT_1\\")%></code></pre>\\n            */\\njQuery('.cell').bind('mouseover', function(){\\n  var offset = $(this).offset();\\n  var left = 50;\\n  if(offset.left >= 600){left = -250;}\\n  var top = 0;\\n  if(offset.top >= 550){top = -100;}\\n  jQuery(this).children('.text').css({'display':'block', 'position':'absolute', 'top':top+'px', 'left':left+'px', 'z-index':9999});\\n}); \\njQuery('.cell').bind('mouseout', function(){\\n  jQuery(this).children('.text').css({'display':'none', 'z-index':1});\\n});\\n\x3C/script>"}`);
