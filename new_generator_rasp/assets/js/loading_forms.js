sch.Forms = {};

sch.LOADING_FORMS = JSON.parse('{"CALENDAR_1":{"formId":"inner-container","actions":[],"innerForms":[],"id":"41","code":"CALENDAR_1","name":"Годичный календарь","visParams":"[]","get_":"","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.params = form.params||{};\\nform.data.PARAMS = form.params;\\n$(\'#inner-container > div > div.panel-heading.panel-title-ok.top-sub-navbar > div.bs-panel-title-row > div > h3\')\\n  .animate({opacity:0, fontSize: \\"30px\\"}, 400, \\"swing\\", function(){\\n  $(\'#inner-container > div\').css(\\"background-color\\", \\"#f5f5f5db\\");\\n  $( this ).css(\\"color\\", \\"green\\");\\n  $( this ).animate({opacity:1, fontSize: \\"24px\\"}, 400, \\"swing\\", function(){\\n    $(\'#inner-container > div\').css(\\"background-color\\", \\"#fff\\");\\n    $( this ).css(\\"color\\", \\"black\\");\\n  });\\n});  \\n//загрузка навигации приложения\\nformLoad(\\"CALENDAR_HOR_NAV\\", form.params, \\"horizont-panel\\", function(frm){\\n  //изменение режима отображения \\n  frm.on(\\"USER_CALENDAR:click PC:click EVENTS:click EASY_EVENTS:click REMOVE:click PRINT:click SETT:click TMPL:click ARHIVE:click\\", \\n         function(data, action){\\n    form.closeDialog(\\"dialog-day-editor\\");\\n    form.params.MODE = action;\\n    if(action == \'PC\'){formLoad(\\"CALENDAR_PASHA\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'PRINT\'){\\n      form.params.PRINT_MODE = form.params.PRINT_MODE||\'P_SCHEDULE\';\\n      formLoad(\\"CALENDAR_PRINT\\", form.params, \\"inner-container\\", function(frm){});\\n    }\\n    if(action == \'SETT\'){formLoad(\\"CALENDAR_SETT\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'TMPL\'){formLoad(\\"CALENDAR_TMPL\\", form.params, \\"inner-container\\", function(frm){});}\\n    if((action != \'PC\')&&(action != \'PRINT\')&&(action != \'SETT\')&&(action != \'TMPL\')){form.reload();}  \\n  });  \\n});\\n\\nform.data.YEAR = form.params.YEAR||new Date().getFullYear();\\nvar pObj = {};\\n//наполнение списка служащих\\n_.each(sch.LISTS.SERVUSES.ROWS, function(p){\\n  pObj[p.SERVUS] = p.SERVUS;\\n});\\nform.data.SERVUS_LIST = pObj;\\nform.data.SERVUS = sch.SETTINGS.SERVUS;\\nform.on(\\"SERVUS:change\\", function(data){\\n  sch.SETTINGS.SERVUS = data.SERVUS;\\n  setValue({code: \'USER_SETTINGS\', value: sch.SETTINGS});\\t\\n});\\n\\nif(form.params.MODE == \'USER_CALENDAR\'){\\n  form.data.TITLE = \'Календарь\';\\n  //наполняем месячные календари \\n  for(var i = 0; i < 12; i++){\\n        form.data[\'M_CALENDAR\'+i] = generateNullCalendar(i);\\n      };\\n}else{\\n  pObj = {};\\n  //наполнение списка лет + генерация подвижного календаря на выбранный год\\n  _.each(sch.LISTS.YEARS.ROWS, function(p){\\n    pObj[p.CODE] = p.CODE;\\n    if(p.CODE == form.data.YEAR){genPashaCalendar(p.PREV_PD, p.NOW_PD);}\\n  });\\n  form.data.YEAR_LIST = pObj;\\n  //изменение года \\n  form.on(\\"YEAR:change\\", function(data){\\n    //перезагрузка Пасхального календаря на выбранный год\\n    sch.PASHA_CALENDAR =[];\\n    var y = _.find(sch.LISTS.YEARS.ROWS, function(r){return r.CODE == form.data.YEAR;});\\n    if(y){genPashaCalendar(y.PREV_PD, y.NOW_PD);}    \\n    form.params.YEAR = form.data.YEAR;\\n    form.reload();\\n  });\\n}\\nif(form.params.MODE == \'EASY_EVENTS\'){form.data.TITLE = \'Расписание (Добавление)\';}\\nif(form.params.MODE == \'EVENTS\'){form.data.TITLE = \'Расписание (Редактирование)\';}\\nif(form.params.MODE == \'REMOVE\'){form.data.TITLE = \'Расписание (Удаление)\';}\\nif(form.params.MODE == \'ARHIVE\'){form.data.TITLE = \'Расписание (Архив)\';}\\nif((form.params.MODE == \'EVENTS\')\\n   ||(form.params.MODE == \'EASY_EVENTS\')\\n   ||(form.params.MODE == \'REMOVE\')\\n   ||(form.params.MODE == \'ARHIVE\')\\n  ){\\n  //наполняем месячные календари \\n  for(var i = 0; i < 12; i++){\\n         form.data[\'M_CALENDAR\'+i] = generateCalendar(form.params.YEAR, i, true, true);\\n     };\\n\\n  //время для быстрого расписания\\n  form.data.M_TIME = form.params.M_TIME||sch.SETTINGS.MORNING_SERV_TIME;\\n  form.data.E_TIME = form.params.E_TIME||sch.SETTINGS.EVENING_SERV_TIME;\\n  form.data.ADD_E_SERV = form.params.ADD_E_SERV;\\n  //события для составления быстрого расписания \\n  form.on(\\"E_TIME:change\\", function(data){\\n    form.params.E_TIME = form.data.E_TIME;\\n  });\\n  form.on(\\"M_TIME:change\\", function(data){\\n    form.params.M_TIME = form.data.M_TIME;\\n  });\\n  form.on(\\"e-serv:click\\", function(data, action){\\n    form.params.ADD_E_SERV = !form.params.ADD_E_SERV;\\n    form.data.ADD_E_SERV = form.params.ADD_E_SERV;\\n    form.render();\\n  });\\n\\n}\\n\\nif(form.params.MODE == \'PC\'){\\n  form.data.TITLE = \'Пасхальный календарь\';\\n\\n  //наполняем месячные календари\\n  for(var i = 0; i < 12; i++){\\n    if(!form.data[\'M_CALENDAR\'+i]) {\\n      form.data[\'M_CALENDAR\'+i] = generateCalendar(form.params.YEAR, i, false, true);\\n    }\\n  };\\n}\\n\\n\\nconsole.log(form);\\n//при выборе дня:\\n//в режиме добавления событий - открывается редактор для добавления события\\n//в режиме наполнения пользовательского календаря - редактор дня!data.HOLYDAY;\\nform.on(\\"render\\", function(){\\n});\\n\\n//функция добавляет или изменяет запись в журнале на заданную дату \\nfunction editJornal(fDate, time_, serv_, serv_code_, serv_type_){\\n  var ispCnt, prichCnt = 0;\\n  var infoJorn, infoJorn1, infoJorn2, infoSch = \'\';\\n  var servus = sch.SETTINGS.SERVUS;\\n  //получение сводной информации для печати\\n  if(serv_code_){\\n    if((serv_code_ ==\'LIT\')||(serv_code_ ==\'LIT1\')||(serv_code_ ==\'LIT2\')||(serv_code_ ==\'LIT3\')){\\n      ispCnt   = rand(0, sch.SETTINGS.MAX_RAND_ISP); \\n      prichCnt = rand(0, sch.SETTINGS.MAX_RAND_PRICH);\\n      infoJorn = \'время: \'+time_+\'| служба: \'+serv_+\'| служил: \'+servus+\'| исп.: \'+ispCnt+\'| прич: \'+prichCnt;\\n    }\\n    else{\\n      infoJorn = \'время: \'+time_+\'| служба: \'+serv_+\'| служил: \'+servus;\\n    }\\n  }\\n  infoSch = time_+\' \'+serv_;\\n  //получение номера документа\\n  var d = new Date(fDate);\\n  var m = d.getMonth();\\n  if(m < 10)m= \'0\'+m;\\n  var srvDocNum = \'L-\'+d.getFullYear()+\'/\'+m+\'/\'+d.getDate()+\'/\'+d.getHours()+d.getMinutes()+d.getSeconds();\\n  //загружаем список служб для селектлиста\\n  var pObj = {};\\n  _.each(sch.LISTS.SRVS.ROWS, function(p){\\n    pObj[p.SERV_CODE] = p.SERV;\\n  });\\n  //получение объекта - службы\\n  var objServ = {\\n    SHOW_IN_RASP:true,\\n    SRV_DOC_NUM:srvDocNum,\\n    TIME: time_,  \\n    SRVS: pObj,  \\n    SERV: serv_,  \\n    SERV_CODE: serv_code_,  \\n    SERV_TYPE: serv_type_, \\n    SERVUS : sch.SETTINGS.SERVUS,\\n    ISP_CNT : \'0\',\\n    PRICH_CNT : \'0\',\\n    BAPT_OBJ : \'\',\\n    BAPT_OBJ_SEX : \'M\',\\n    BAPT_OBJ_SEX_ : \'Мужской\',\\n    BAPT_OBJ_AGE : 1,\\n    BAPT_OBJ_AGE_ : \'до года\',\\n    BAPT_F : \'\',\\n    BAPT_M : \'\',\\n    BAPT_SAINT : \'\',\\n    BAPT_SAINT_CELEBR : \'\',\\n    GROOM : \'\',\\n    BRIDE : \'\',\\n    WITNESSES : \'\',\\n    WEDD_TYPE: 1,\\n    WEDD_TYPE_: \'Венчание\',\\n    SOB_CNT : 1,\\n    DECEASED : \'\',\\n    FUN_TYPE : 1,\\n    FUN_TYPE_ : \'Очное отпевание\',\\n    FUN_AGE : 1,\\n    FUN_AGE_ : \'взрослый(-ая)\',\\n    CEMETERY : \'\',\\n    ISP_CNT: ispCnt,\\n    PRICH_CNT: prichCnt,\\n    INFO_JORN : infoJorn,\\n    INFO_JORN_1 : infoJorn1,\\n    INFO_JORN_2 : infoJorn2,\\n    INFO_SCH : infoSch\\n  };\\n  var searchData;\\n  // вычисляем его объект даты календаря\\n  var objCalMonth;\\n  //получаем полную дату\\n  var objDate = new Date(fDate);\\n  //получаем месяц даты\\n  var month = objDate.getMonth();\\n  objCalMonth = form.data[\'M_CALENDAR\'+month].ROWS;\\n\\n  //получаем дату в нашем календаре\\n  //если запись уже есть в списке - обновляем ее\\n  searchData = _.find(objCalMonth, function(cd){\\n    return(cd.FORMAT_DATE === fDate);\\n  });\\n  if(searchData){\\n    //если у данной даты уже есть службы, то ставим их все\\n    if(searchData.SERV_LIST &&(searchData.SERV_LIST.length > 0)){\\n      var sdRow = _.find(searchData.SERV_LIST, function(r){\\n        return(time_ === r.TIME)\\n      });\\n      //добавляем службу если с таким временем нет \\n      //(NOT_ADD_SRVS - когда нельзя добавлять службы в этот день)\\n      if(!sdRow && !searchData.NOT_ADD_SRVS){\\n        searchData.SERV_LIST.push(objServ);\\n      }\\t\\t\\n    }\\n    //если для данной даты нет служб, то создаем список служб с одним значением\\n    else{\\n      searchData.SERV_LIST = []; \\n      searchData.SERV_LIST.push(objServ);\\n    }\\n    _.each(searchData.SERV_LIST, function(r){\\n      //проставляем время в милисекундах для сортировки\\n      r.TIME_MS = getTimeMS(r.TIME);\\n    });\\n    //сортируем по времени\\n    searchData.SERV_LIST.sort((prev, next) => prev.TIME_MS - next.TIME_MS);\\n    searchData.SELECTED_LESSON_CNT = searchData.SERV_LIST.length;\\n\\n    //получаем запись в журнале\\n    var jRow = _.find(sch.JORNAL_ROWS, function(jr){\\n      return(jr.FORMAT_DATE === searchData.FORMAT_DATE);\\n    });\\n    if(jRow){\\n      jRow = searchData;\\n    }\\n    else{//добавляем ее\\n      sch.JORNAL_ROWS.push(searchData);\\n    }\\n  }\\n};\\n\\nform.on(\\"date:click date0:click date1:click date2:click date3:click date4:click date5:click date6:click date7:click date8:click date9:click date10:click date11:click\\", function(data, action){\\n  //console.log(data);\\n  if(form.params.MODE == \'USER_CALENDAR\'){\\n    //установить значения для записи в пользовательском календаре \\n    function setUcRow(data_){\\n      _.each(data_.SERV_LIST, function(r){\\n        r.TIME_MS = getTimeMS(r.TIME);\\n        var serv = _.find(sch.LISTS.SRVS.ROWS, function(s){return s.SERV_CODE == r.SERV_CODE;});\\n        if(serv){\\n          if(serv.SERV_CODE == \\"ANOTHER\\"){\\n            r.SERV = r.ANOTHER_SERV\\n          }\\n          else{\\n            r.SERV = serv.SERV;\\n          }               \\n        }\\n        if(r.SERV_CODE && ((r.SERV_CODE ==\'LIT\')||(r.SERV_CODE ==\'LIT1\')||(r.SERV_CODE ==\'LIT2\')||(r.SERV_CODE ==\'LIT3\'))){\\n          r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS||sch.SETTINGS.SERVUS+\' исп.: \'+r.ISP_CNT+\' прич: \'+r.PRICH_CNT;\\n        }else{\\n          r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS||sch.SETTINGS.SERVUS;\\n        }\\n        r.INFO_SCH = r.TIME+\' \'+r.SERV;\\n      });\\n      //сортируем по времени\\n      data_.SERV_LIST.sort((prev, next) => prev.TIME_MS - next.TIME_MS);\\n      if(data_.SERV_LIST.length == 0){data_.NOT_ADD_SRVS = false;}\\n\\n      //если запись уже есть в списке - обновляем ее\\n      var usCal = _.find(sch.USER_CALENDAR, function(uc){\\n        return(uc.FORMAT_DATE === data_.FORMAT_DATE);\\n      });\\n      if(usCal){\\n        sch.USER_CALENDAR[_.indexOf(sch.USER_CALENDAR, usCal)] = data_;\\n      }else{\\n        sch.USER_CALENDAR.push(data_);\\n      }\\n    };\\n\\n    //получение дня в пользовательском календаре\\n    function getUcDay(date_){\\n      var usCalDay = {};\\n      var usCal = _.find(sch.USER_CALENDAR, function(uc){\\n        return(uc.FORMAT_DATE === date_);\\n      });\\n      if(usCal){\\n        usCalDay = usCal;\\n      }\\n      else{\\n        usCalDay.FORMAT_DATE      = date_;\\n        usCalDay.COMMENT      = \'\';\\n        usCalDay.COMMENT_LIST = [];\\n        usCalDay.HOLYDAY      = false;\\n        usCalDay.SERV_LIST    = [];\\n        usCalDay.NOT_ADD_SRVS = false;\\n      }\\n      return usCalDay;\\n    };\\n    var ucNowDay = getUcDay(data.SHORT_FORMAT_DATE);\\n    var ucPrevDay = getUcDay(data.SHORT_PREV_FORMAT_DATE);\\n\\n    var params = {N_DATA: ucNowDay, P_DATA: ucPrevDay};\\n    form.loadModalDialog(\\"UC_DAY_EDITOR\\", params, \\"dialog-day-editor\\", function(f){\\n      f.on(\\"render\\", function(){\\n        f.on(\\"save:click\\", function(d, action){\\n          //data = f.data;\\n          //data.HOLYDAY = true;\\n          //настоящий день\\n          console.log(f.data);\\n          setUcRow(f.data.N_DATA, true);\\n\\n          //предыдущий день\\n          setUcRow(f.data.P_DATA);\\n\\n          form.closeDialog(\\"dialog-day-editor\\");\\n          //сохраняем в хранилище\\n          setValue({code: \'USER_CALENDAR\', value: sch.USER_CALENDAR});\\t\\n          form.reload();\\n        });\\n\\n        f.on(\\"delete:click\\", function(d, action){\\n          f.data.COMMENT = \\"\\";\\n          f.data.COMMENT_LIST = [];\\n          f.data.SERV_LIST = f.data.SERV_LIST_EV = f.data.SERV_LIST_MR = [];\\t\\t\\t\\t\\n          data = f.data;\\n          data.HOLYDAY = false;\\n          //если комментарий отсутствует, то удаляем запись из пользовательского календаря\\n          var usCal = _.find(sch.USER_CALENDAR, function(uc){\\n            return(uc.FORMAT_DATE === data.SHORT_FORMAT_DATE);\\n          });\\n          if(usCal){\\n            var indx = _.indexOf(sch.USER_CALENDAR, usCal);\\n            sch.USER_CALENDAR.splice(indx, 1);\\n          }\\n          form.closeDialog(\\"dialog-day-editor\\");\\n          //сохраняем в хранилище\\n          setValue({code: \'USER_CALENDAR\', value: sch.USER_CALENDAR});\\t\\n          form.render();\\n        });\\n      });\\n    });\\n  }\\n\\n\\n  if(form.params.MODE == \'EVENTS\'){\\n    form.loadModalDialog(\\"DAY_EDITOR\\",data, \\"dialog-day-editor\\", function(f){\\n      f.on(\\"render\\", function(){\\n        f.on(\\"save:click\\", function(d, action){\\n          data = f.data;\\n          _.each(data.SERV_LIST, function(r){\\n            r.TIME_MS = getTimeMS(r.TIME);\\n            var serv = _.find(sch.LISTS.SRVS.ROWS, function(s){return s.SERV_CODE == r.SERV_CODE;});\\n            if(serv){\\n              if(serv.SERV_CODE == \\"ANOTHER\\"){\\n                r.SERV = r.ANOTHER_SERV\\n              }\\n              else{\\n                r.SERV = serv.SERV;\\n              }               \\n            }\\n            if(r.SERV_TYPE && r.SERV_TYPE ==\'LIT\'){\\n              r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS||sch.SETTINGS.SERVUS+\' исп.: \'+r.ISP_CNT+\' прич: \'+r.PRICH_CNT;\\n            }else{\\n              r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS||sch.SETTINGS.SERVUS;\\n            }\\n            r.INFO_SCH = r.TIME+\' \'+r.SERV;\\n          });\\n          data.SELECTED_LESSON_CNT = data.SERV_LIST.length;\\n\\n          //сортируем по времени\\n          data.SERV_LIST.sort((prev, next) => prev.TIME_MS - next.TIME_MS);\\n\\n          var arr = deepCopy(data.SERV_LIST);\\n          var jRow = _.find(sch.JORNAL_ROWS, function(jr){\\n            return(jr.FORMAT_DATE === data.FORMAT_DATE);\\n          });\\n          if(jRow){\\n            jRow.SERV_LIST = arr;\\n            var cnt = \'\';\\n            if(jRow.SERV_LIST.length > 0)cnt =jRow.SERV_LIST.length;\\n            jRow.SELECTED_LESSON_CNT = cnt;\\n          }\\n          else{sch.JORNAL_ROWS.push(data);}\\n          setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n          form.closeDialog(\\"dialog-day-editor\\");\\n          form.render();\\n        });\\n        f.on(\\"exit:click\\", function(d, action){\\n          form.closeDialog(\\"dialog-day-editor\\");\\n        });\\n\\n      });\\n    });\\n  }\\n  //режим быстрого редактирования архива\\n  if(form.params.MODE == \'ARHIVE\'){\\n    //получаем запись в журнале\\n    var jRow = _.find(sch.JORNAL_ROWS, function(jr){\\n      return (jr.FORMAT_DATE === data.FORMAT_DATE);\\n    });\\n    if(jRow){\\n      var indx = _.indexOf(sch.JORNAL_ROWS, jRow)\\n      sch.JORNAL_ROWS[indx].IS_ARHIVE = !sch.JORNAL_ROWS[indx].IS_ARHIVE;\\n    }\\n    setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n    form.reload();\\n  }\\n  //режим быстрого редактирования (добавление служб)\\n  if(form.params.MODE == \'EASY_EVENTS\'){\\n    if(form.params.ADD_E_SERV)editJornal(getCalcDate(data.FORMAT_DATE, -1), \\n                                         form.data.E_TIME, \\n                                         sch.SETTINGS.EVENING_SERV_NAME, \\n                                         sch.SETTINGS.EVENING_SERV_CODE, \\n                                         sch.SETTINGS.EVENING_SERV_TYPE);\\n    editJornal(data.FORMAT_DATE, \\n               form.data.M_TIME, \\n               sch.SETTINGS.MORNING_SERV_NAME, \\n               sch.SETTINGS.MORNING_SERV_CODE, \\n               sch.SETTINGS.MORNING_SERV_TYPE);\\n    setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n    form.render();\\n  }\\n  //режим быстрого редактирования (удаление служб) \\n  if(form.params.MODE == \'REMOVE\'){\\n    //чтобы не делать перезагрузку - вносим изменения в конкретный день\\n    data.SERV_LIST =[];\\n    data.SELECTED_LESSON_CNT =\'\';\\n    //получаем запись в журнале и удаляем ее\\n    if(data.IS_ARHIVE){msgPrint(\'Архивная запись не может быть удалена!\', \\"danger\\");}\\n    else{\\n      var jRow = _.find(sch.JORNAL_ROWS, function(jr){\\n        return (jr.FORMAT_DATE === data.FORMAT_DATE);\\n      });\\n      if(jRow){\\n        var indx = _.indexOf(sch.JORNAL_ROWS, jRow)\\n        delete sch.JORNAL_ROWS[indx];\\n      }\\n      setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t      \\n      form.reload();\\n    }\\n  }\\n\\n});\\n\\n//быстрое наполнение/удаление записей архива\\nform.on(\\"ahive-unarchive-all-srvs:click\\", function(data, act){\\n  _.each(sch.JORNAL_ROWS, function(jr){\\n    if((new Date(jr.FORMAT_DATE).getFullYear() == form.data.YEAR) && jr.SELECTED_LESSON_CNT && (jr.SELECTED_LESSON_CNT > 0)){\\n      jr.IS_ARHIVE = !jr.IS_ARHIVE;\\n    }\\n  });\\n  setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n  form.reload();\\n});\\n//быстрое наполнение расписания\\nform.on(\\"add-celebrates-srvs:click\\", function(data, act){\\n  //получаем месячные календари \\n  for(var i = 0; i < 12; i++){\\n    if(form.data[\'M_CALENDAR\'+i]) {//alert(\'M_CALENDAR\'+i);\\n      //получаем дни месяца \\n      _.each(form.data[\'M_CALENDAR\'+i].ROWS, function(cd){\\n        //получаем выделенные дни данного месяца  \\n        if(cd.HOLYDAY && !cd.ANY_MONTH){\\n          //добавляем службу в предыдущий день\\n          if(form.params.ADD_E_SERV){\\n            editJornal(getCalcDate(cd.FORMAT_DATE, -1), \\n                       form.data.E_TIME, \\n                       sch.SETTINGS.EVENING_SERV_NAME, \\n                       sch.SETTINGS.EVENING_SERV_CODE,\\n                       sch.SETTINGS.EVENING_SERV_TYPE\\n                      );\\n          }\\n          editJornal(cd.FORMAT_DATE, \\n                     form.data.M_TIME, \\n                     sch.SETTINGS.MORNING_SERV_NAME, \\n                     sch.SETTINGS.MORNING_SERV_CODE,\\n                     sch.SETTINGS.MORNING_SERV_TYPE\\n                    );\\n        }\\n      });\\n    }\\n  };\\n  setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n  form.reload();\\n});\\n//быстрое удаление расписания remove-all-srvs\\nform.on(\\"remove-all-srvs:click\\", function(data, act){\\n  if(confirm(\'Будут удалены все службы текущего года! Продолжить?\')){\\n    var arr = [];\\n    _.each(sch.JORNAL_ROWS, function(jr){\\n      if((new Date(jr.FORMAT_DATE).getFullYear() != form.data.YEAR) || jr.IS_ARHIVE){\\n        arr.push(jr);\\n      }\\n    });\\n    sch.JORNAL_ROWS = arr;\\n    console.log(sch.JORNAL_ROWS);\\n    setValue({code: \'JORNAL_ROWS\', value: sch.JORNAL_ROWS});\\t\\n  }\\n  form.reload();\\n});\\n","visModel":{"id":"pc-46","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","fields":[{"id":"pc-501","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","fields":[{"id":"pc-946","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"календарь на январь","title":"","source":"M_CALENDAR0","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date0","source_action":""},{"id":"pc-608","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR1","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date1","source_action":""},{"id":"pc-411","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR2","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date2","source_action":""},{"id":"pc-487","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR3","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date3","source_action":""},{"id":"pc-65","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR4","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date4","source_action":""},{"id":"pc-532","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR5","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date5","source_action":""},{"id":"pc-696","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR6","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date6","source_action":""},{"id":"pc-310","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR7","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date7","source_action":""},{"id":"pc-405","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR8","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date8","source_action":""},{"id":"pc-513","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR9","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date9","source_action":""},{"id":"pc-143","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR10","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date10","source_action":""},{"id":"pc-333","condition":"true","ftype":"field","type":"W_MONTH_CALENDAR","label":"","title":"","source":"M_CALENDAR11","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"4","_type":"BUTTON_CONSTR","_active":"","action":"date11","source_action":""}]},{"id":"pc-181","condition":"true","ftype":"container","type":"DIALOG","label":"","title":"Редактор дня","height":"700px","width":"100%","dialog_id":"dialog-day-editor","source_title":"","source":"data.COMMENT","_type":"BUTTON_CONSTR","_active":""}],"grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"TITLE","is_top_navbar":"true","buttons":[{"id":"pc-285","ftype":"container","type":"BUTTON_GROUP","label":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","vertical":"","fields":[{"id":"pc-363","condition":"form.params.MODE == \'ARHIVE\'","ftype":"field","type":"BS_BUTTON","label":"Быстрое добавление/удаление записей архива","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"ahive-unarchive-all-srvs","tooltip":"Быстрое добавление/удаление записей архива","icon":"glyphicon glyphicon-book","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""},{"id":"pc-743","_type":"UL_CONSTR","ftype":"container","type":"BUTTON_GROUP","label":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"form.params.MODE == \'EASY_EVENTS\'","vertical":"","fields":[{"id":"pc-407","condition":"true","ftype":"field","type":"BS_BUTTON","label":"Добавить все праздничные службы","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-celebrates-srvs","tooltip":"Добавить все праздничные службы","icon":"glyphicon glyphicon-plus green ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-938","condition":"true","ftype":"field","type":"BS_CHECK","label":"Добавлять вечерние службы","title":"Вечер","source":"ADD_E_SERV","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"e-serv","tooltip":"Добавлять вечерние службы","as_button":"true","source_title":"","source_tooltip":""},{"id":"pc-759","condition":"true","ftype":"field","type":"TIME","label":"Время утренней службы","title":"","source":"M_TIME","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","tooltip":"Время утренней службы","width":"100px","required":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-551","condition":"true","ftype":"field","type":"TIME","label":"Время вечерней службы","title":"","width":"100px","source":"E_TIME","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","tooltip":"Время вечерней службы","required":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-557","condition":"form.params.MODE == \'REMOVE\'","ftype":"field","type":"BS_BUTTON","label":"Удалить все службы","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"remove-all-srvs","tooltip":"Удалить все службы","icon":"glyphicon glyphicon-remove glyphicon-x2","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-220","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Выбор служащего","title":"","source":"SERVUS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","css":"","source_css":"","font_size":"28","source_list":"SERVUS_LIST"},{"id":"pc-483","ftype":"field","type":"BS_SELECT_LIST","label":"Выбор года","title":"","css":"","source":"YEAR","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"form.params.MODE  != \'USER_CALENDAR\'","font_size":"28","source_list":"YEAR_LIST","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":true,"sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"TITLE":"","SERVUS_LIST":"","YEAR_LIST":""}},"CALENDAR_HOR_NAV":{"formId":"horizont-panel","actions":[],"innerForms":[],"id":"50","code":"CALENDAR_HOR_NAV","name":"Горизонтальная панель навигации календаря","visParams":"[{\\"NAME\\":\\"TITLE\\",\\"DESCR\\":\\"Заголовок календаря\\"},{\\"NAME\\":\\"MODE\\",\\"DESCR\\":\\"\\"}]","get_":"<?php?>","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.params = form.params||[];\\n//console.log(form.params);$(\\"#background\\").css({\\"display\\": \\"none\\"})\\nvar cssUc,cssPc,cssEv,cssEasy,cssRem, cssPrt, cssSett, cssTmpl, cssArch = \'\';\\nif(form.params.MODE === \'USER_CALENDAR\'){\\n  cssUc = \'btn btn-default u-butt selected\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'EVENTS\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt selected\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'EASY_EVENTS\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt selected\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'REMOVE\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt selected\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'PC\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt selected\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'PRINT\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt selected\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'TMPL\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt selected\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'SETT\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt selected\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt\';\\n}\\nif(form.params.MODE === \'ARHIVE\'){\\n  cssUc = \'btn btn-default u-butt\';\\n  cssEv = \'btn btn-default u-butt\';\\n  cssRem = \'btn btn-default u-butt\';\\n  cssEasy = \'btn btn-default u-butt\';\\n  cssPc = \'btn btn-default u-butt\';\\n  cssPrt = \'btn btn-default u-butt\';\\n  cssSett = \'btn btn-default u-butt\';\\n  cssTmpl = \'btn btn-default u-butt\';\\n  cssArch = \'btn btn-default u-butt selected\';\\n}\\nform.data.BUTTON_CALENDAR_LIST = [\\n  {ACT: \\"PC\\",            TEXT: \\"Подвижные\\",        TOOLTIP: \\"Редактирование подвижного календаря\\", CSS: cssPc, ICON: \\"\\"},\\n  {ACT: \\"USER_CALENDAR\\", TEXT: \\"Неподвижные\\",                TOOLTIP: \\"Редактирование неподвижного календаря\\", CSS: cssUc, ICON: \\"\\"},\\n];\\nform.data.BUTTON_LIST = [\\n  {ACT: \\"ARHIVE\\",        TEXT: \\"\\",                    TOOLTIP: \\"Работа с архивом\\", CSS: cssArch, ICON: \\"glyphicon glyphicon-book\\"},\\n  {ACT: \\"PRINT\\",         TEXT: \\"\\",                   TOOLTIP: \\"Печать документов расписания\\", CSS: cssPrt, ICON: \\"glyphicon glyphicon-print\\"},  \\n  {ACT: \\"SETT\\",          TEXT: \\"\\",                TOOLTIP: \\"Настройки приложения\\", CSS: cssSett, ICON: \\"glyphicon glyphicon-list\\"}   \\n];\\nform.data.BUTTON_EDIT_LIST = [\\n  {ACT: \\"EASY_EVENTS\\",   TEXT: \\"\\",                 TOOLTIP: \\"Добавление в расписание\\", CSS: cssEasy, ICON: \\"glyphicon glyphicon-plus\\"},\\n  {ACT: \\"EVENTS\\",        TEXT: \\"\\",            TOOLTIP: \\"Редактирование расписания\\", CSS: cssEv, ICON: \\"glyphicon glyphicon-pencil\\"},\\n  {ACT: \\"REMOVE\\",        TEXT: \\"\\",                  TOOLTIP: \\"Удаление из расписания\\", CSS: cssRem, ICON: \\"glyphicon glyphicon-minus\\"}\\n];\\n//form.data.BUTTON_LIST.push({ACT: \\"TMPL\\",          TEXT: \\"Шаблоны\\",                  TOOLTIP: \\"Шаблоны для правки расписания\\", CSS: cssTmpl} );\\n","visModel":{"id":"pc-270","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","source":"","fields":[{"id":"pc-327","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","size":"3","text":"Календарь:"},{"id":"pc-710","condition":"true","ftype":"array","type":"HORISONT_LIST","label":"","title":"Редактор","source":"BUTTON_EDIT_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","_type":"UL_CONSTR","_active":"","text_align":"center","fields":[{"id":"pc-85","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"","icon":"","css":"","source_action":"ACT","source_title":"TEXT","source_tooltip":"TOOLTIP","source_icon":"ICON","source_css":"CSS","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-279","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","size":"3","text":"| Настройки:"},{"id":"pc-485","condition":"true","ftype":"array","type":"HORISONT_LIST","label":"","title":"Настройки","source":"BUTTON_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","text_align":"center","fields":[{"id":"pc-836","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"","icon":"","css":"","source_action":"ACT","source_title":"TEXT","source_tooltip":"TOOLTIP","source_icon":"ICON","source_css":"CSS","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-137","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","size":"3","text":"| Праздники:","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-955","condition":"true","ftype":"array","type":"HORISONT_LIST","label":"Праздники","title":"Праздники","source":"BUTTON_CALENDAR_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","_type":"UL_CONSTR","_active":"","text_align":"center","fields":[{"id":"pc-957","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"","icon":"","css":"","source_action":"ACT","source_title":"TEXT","source_tooltip":"TOOLTIP","source_icon":"ICON","source_css":"CSS","_type":"BUTTON_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":true,"title":"","sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"BUTTON_EDIT_LIST":[{"ACT":"","TEXT":"","TOOLTIP":"","ICON":"","CSS":""}],"BUTTON_LIST":[{"ACT":"","TEXT":"","TOOLTIP":"","ICON":"","CSS":""}],"BUTTON_CALENDAR_LIST":[{"ACT":"","TEXT":"","TOOLTIP":"","ICON":"","CSS":""}]}},"UC_DAY_EDITOR":{"formId":"dialog-day-editor","actions":[],"innerForms":[],"id":"68","code":"UC_DAY_EDITOR","name":"Редактор дня календаря постоянных дат","visParams":"[]","get_":"","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.params = form.params||{};\\nform.data = form.params;\\n//смена аттрибута, запрещающего добавлять дополнительные службы в этот день\\nform.on(\\"holyday-change:click\\", function(data){\\n  form.data.N_DATA.HOLYDAY = !form.data.N_DATA.HOLYDAY;\\n  //form.params.HOLYDAY = form.data.HOLYDAY;\\n  form.render();\\n});\\nform.on(\\"flag-change:click\\", function(data){\\n  if(form.data.N_DATA)form.data.N_DATA.NOT_ADD_SRVS = !form.data.N_DATA.NOT_ADD_SRVS;\\n  //form.params.NOT_ADD_SRVS = form.data.NOT_ADD_SRVS;\\n  form.render();\\n});\\n\\n//комментарии (события данного дня)\\n//\\nform.on(\\"add-comment:click\\", function(data, action){\\n  if(form.data.N_DATA)form.data.N_DATA.COMMENT_LIST.push({COMMENT : \'\'}); \\n  //form.params.COMMENT_LIST = form.data.COMMENT_LIST;\\n  form.render();\\n});\\nform.on(\\"del-comment:click\\", function(data, action){\\n  if(form.data.N_DATA){\\n  var indx = _.indexOf(form.data.N_DATA.COMMENT_LIST, data);\\n  var arr = [];\\n  _.each(form.data.N_DATA.COMMENT_LIST, function(r,i){\\n    if(i != indx){arr.push(r);}\\n  });\\n  form.data.N_DATA.COMMENT_LIST = arr;\\n  form.render();\\n  }\\n});\\n\\n//службы по умолчанию \\nconsole.log(form.data);\\n//\\n\\nif(form.data.N_DATA){\\n  form.data.READ_DATE = getReadDate2(new Date(form.data.N_DATA.FORMAT_DATE));\\n  form.data.N_DATA.TITLE_SERV = \'Служба на \'+form.data.READ_DATE;\\n  form.data.N_DATA.SERV_LIST = form.data.N_DATA.SERV_LIST||[];\\n  form.data.N_DATA.COMMENT_LIST = form.data.N_DATA.COMMENT_LIST||[];\\n}\\nif(form.data.P_DATA){\\n  form.data.P_DATA.TITLE_SERV = \'Служба на \'+getReadDate2(new Date(form.data.P_DATA.FORMAT_DATE));\\n  form.data.P_DATA.SERV_LIST = form.data.P_DATA.SERV_LIST||[];\\n}\\nvar obj = {};\\n_.each(sch.LISTS.SRVS.ROWS, function(p){\\n  obj[p.SERV_CODE] = p.SERV;\\n});\\n\\nform.on(\\"add-serv-ev:click\\", function(data, action){\\n  form.data.P_DATA.SERV_LIST.push({\\n    TIME : sch.SETTINGS.EVENING_SERV_TIME, \\n    SRVS: obj,\\n    SERVUS: sch.SETTINGS.SERVUS,\\n    SERV_CODE: sch.SETTINGS.EVENING_SERV_CODE,\\n    SERV_TYPE: sch.SETTINGS.EVENING_SERV_TYPE\\n  }); \\n  //form.params.SERV_LIST_EV = form.data.SERV_LIST_EV;\\n  form.render();\\n});\\nform.on(\\"add-serv-mr:click\\", function(data, action){\\n  form.data.N_DATA.SERV_LIST.push({\\n    TIME : sch.SETTINGS.MORNING_SERV_TIME, \\n    SRVS: obj,\\n    SERVUS: sch.SETTINGS.SERVUS,\\n    SERV_CODE: sch.SETTINGS.MORNING_SERV_CODE,\\n    SERV_TYPE: sch.SETTINGS.MORNING_SERV_TYPE\\n  }); \\n  //form.params.SERV_LIST_MR = form.data.SERV_LIST_MR;\\n  form.render();\\n});\\nform.on(\\"del-serv-ev:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.P_DATA.SERV_LIST, data);\\n  var arr = [];\\n  _.each(form.data.P_DATA.SERV_LIST, function(r,i){\\n    if(i != indx)arr.push(r);\\n  });\\n  form.data.P_DATA.SERV_LIST = arr;\\n  form.render();\\n});\\n\\nform.on(\\"del-serv-mr:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.N_DATA.SERV_LIST, data);\\n  var arr = [];\\n  _.each(form.data.N_DATA.SERV_LIST, function(r,i){\\n    if(i != indx)arr.push(r);\\n  });\\n  form.data.N_DATA.SERV_LIST = arr;\\n  form.render();\\n});\\n\\n","visModel":{"id":"pc-679","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","css":"","source_css":"","source_title":"READ_DATE","is_top_navbar":"","buttons":[{"id":"pc-214","_type":"UL_CONSTR","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","fields":[{"id":"pc-465","ftype":"field","type":"BS_CHECK","label":"","title":"","tooltip":"Выделить как обязательный","action":"holyday-change","source":"HOLYDAY","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","as_button":"true","source_title":"","source_tooltip":"","_type":"BUTTON_CONSTR","_active":true},{"id":"pc-320","ftype":"field","type":"BS_CHECK","label":"","title":"","tooltip":"Запрет добавлять в этот день еще службы","action":"flag-change","source":"NOT_ADD_SRVS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"form.data.N_DATA&&form.data.N_DATA.SERV_LIST && form.data.N_DATA.SERV_LIST.length > 0","as_button":"true","source_title":"","source_tooltip":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-246","ftype":"field","type":"BS_BUTTON","label":"","title":"сохранить","tooltip":"сохранить","action":"save","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-431","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"удалить","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"1","css":"lg","source_css":"","action":"delete","tooltip":"удалить","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-254","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"500px","width":"100%","margin":"10px","padding":"5px","fields":[{"id":"pc-623","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","fields":[{"id":"pc-48","_type":"UL_CONSTR","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"12","_active":"","condition":"true","fields":[{"id":"pc-202","condition":"true","ftype":"field","type":"TEXT_AREA","label":"Основное событие","title":"Основное событие","width":"100%","source":"COMMENT","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"12","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-915","_type":"UL_CONSTR","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"12","_active":"","condition":"true","fields":[{"id":"pc-650","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[{"id":"pc-191","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Добавить комментарий","action":"add-comment","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","icon":"glyphicon glyphicon-plus","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-555","condition":"true","ftype":"container","type":"DIV","label":"","title":"","width":"100%","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"auto","height":"350px","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-763","condition":"true","ftype":"array","type":"REPORT","label":"","title":"Основное событие","source":"COMMENT_LIST","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"12","_type":"UL_CONSTR","_active":"","action":"","show_header":"","fields":[{"id":"pc-831","condition":"true","ftype":"field","type":"BS_TEXT","label":"событие","title":"событие","width":"100%","source":"COMMENT","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"12","placeholder":"","mask":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-137","condition":"","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"del-comment","tooltip":"Удалить комментарий","icon":"glyphicon glyphicon-remove","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":""}]},{"id":"pc-968","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Службы по умолчанию","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","css":"","fields":[{"id":"pc-9","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"250px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-698","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-931","ftype":"container","type":"OBJECT","label":"","title":"","source":"P_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"6","condition":"true","fields":[{"id":"pc-593","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"6","_type":"PANEL_CONSTR","_active":"","css":"","hide_header":"","source_css":"","source_title":"TITLE_SERV","is_top_navbar":"","buttons":[{"id":"pc-232","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-serv-ev","tooltip":"добавить строку","icon":"glyphicon glyphicon-plus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-934","condition":"true","ftype":"array","type":"REPORT","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","title":"","source":"SERV_LIST","action":"","show_header":"","fields":[{"id":"pc-149","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","source":"TIME","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","width":"100px","required":"","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-561","condition":"","ftype":"container","type":"DIV","label":"","title":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","_type":"UL_CONSTR","_active":"","width":"200px","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-989","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"20px","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-749","condition":"data.SERV_CODE == \'ANOTHER\'","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"200px","source":"ANOTHER_SERV","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""}]},{"id":"pc-386","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","action":"del-serv-ev","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"_type":"UL_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""},{"id":"pc-820","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"6","fields":[{"id":"pc-784","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"6","_type":"PANEL_CONSTR","_active":"","css":"","hide_header":"","source_css":"","source_title":"TITLE_SERV","is_top_navbar":"","buttons":[{"id":"pc-40","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-serv-mr","tooltip":"добавить строку","icon":"glyphicon glyphicon-plus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-394","condition":"true","ftype":"array","type":"REPORT","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","title":"","source":"SERV_LIST","action":"","show_header":"","fields":[{"id":"pc-427","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","source":"TIME","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","width":"100px","required":"","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-292","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"200px","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-559","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"20px","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-945","condition":"data.SERV_CODE == \'ANOTHER\'","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"200px","source":"ANOTHER_SERV","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-585","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","action":"del-serv-mr","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"_type":"UL_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[]}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","hide_header":"","sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"READ_DATE":"","COMMENT_LIST":[{}],"TITLE_SERV":"","SERV_LIST":[{"SRVS":""}]}},"CALENDAR_PASHA":{"formId":"inner-container","actions":[],"innerForms":[],"id":"23","code":"CALENDAR_PASHA","name":"Календарь событий относительно Пасхи","visParams":"[{\\"NAME\\":\\"MODE\\",\\"DESCR\\":\\"режим работы\\"}]","get_":"$params = json_decode($_POST[\'PARAMS\']);\\n//class forms {};\\n//$object = new forms();\\n//$response = new forms();\\n//получаем форму\\nif($params->CODE){\\n\\tclass forms {};\\n\\t$response = new forms();\\n\\t$query_ = \\"SELECT `ID`, `CODE`, `NAME`, `PARAMS`, `GET_`, `PUT_`, `DELETE_`, `AJAX`, `VIS_MODEL`, `DATA_MODEL`, `JS`, `STATUS`, `PARENT_`, `DATE_CRT`, `DATE_MOD` \\n    FROM `constr_forms` WHERE CODE = \'\\".$params->CODE.\\"\'\\";\\t\\n\\t$sql = workWithBD($query_);\\n\\twhile ($obj = mysqli_fetch_object($sql)){\\n\\t\\t$response->id = $obj->ID;\\n\\t\\t$response->code = $obj->CODE;\\n\\t\\t$response->name = $obj->NAME;\\n\\t\\t$response->params = $obj->PARAMS;\\n\\t\\t$response->get_ = $obj->GET_;\\n\\t\\t$response->put_ = $obj->PUT_;\\n\\t\\t$response->delete_ = $obj->DELETE_;\\n\\t\\t$response->ajax = $obj->AJAX;\\n\\t\\t$response->js = $obj->JS;\\n\\t\\t$response->parent_ = $obj->PARENT_;\\n\\t\\t$response->vismodel = json_decode($obj->VIS_MODEL);\\n\\t\\t$response->datamodel = json_decode($obj->DATA_MODEL);\\n\\t};\\t\\n\\techo json_encode($response);\\n};\\n\\n","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.params = form.params||[];\\n$(\'#inner-container > div > div.panel-heading.panel-title-ok.top-sub-navbar > div.bs-panel-title-row > div > h3\')\\n  .animate({opacity:0, fontSize: \\"30px\\"}, 400, \\"swing\\", function(){\\n  $(\'#inner-container > div\').css(\\"background-color\\", \\"#f5f5f5db\\");\\n  $( this ).css(\\"color\\", \\"green\\");\\n  $( this ).animate({opacity:1, fontSize: \\"24px\\"}, 400, \\"swing\\", function(){\\n    $(\'#inner-container > div\').css(\\"background-color\\", \\"#fff\\");\\n    $( this ).css(\\"color\\", \\"black\\");\\n  });\\n});  \\n\\n//загрузка навигации приложения\\nformLoad(\\"CALENDAR_HOR_NAV\\", {MODE:\'PC\'}, \\"horizont-panel\\", function(frm){\\n  //изменение режима отображения \\n  frm.on(\\"USER_CALENDAR:click PC:click EVENTS:click EASY_EVENTS:click REMOVE:click PRINT:click SETT:click TMPL:click ARHIVE:click\\", \\n         function(data, action){\\n    //закрываем диалог, если ранее забыли это сделать \\n    form.closeDialog(\\"dialog-day-editor\\");\\n    form.params.MODE = action;\\n    if(action == \'PC\'){form.reload();}\\n    if(action == \'PRINT\'){\\n      form.params.PRINT_MODE = form.params.PRINT_MODE||\'P_SCHEDULE\';\\n      formLoad(\\"CALENDAR_PRINT\\", form.params, \\"inner-container\\", function(frm){});\\n    }\\n    if(action == \'SETT\'){formLoad(\\"CALENDAR_SETT\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'TMPL\'){formLoad(\\"CALENDAR_TMPL\\", form.params, \\"inner-container\\", function(frm){});}\\n    if((action != \'PC\')&&(action != \'PRINT\')&&(action != \'SETT\')&&(action != \'TMPL\')){formLoad(\\"CALENDAR_1\\", form.params, \\"inner-container\\", function(frm){});}\\n  });  \\n});\\n\\n\\nform.data.PASHA_LIST = sch.CALC_PASHA_CALENDAR;//sch.CALC_PASHA_CALENDAR.concat(calcPashaCalendar());\\n//снимаем признак активноти со всех строк\\nfunction setAllUnAct(arr, innerArr){\\n  _.each(arr, function(row){\\n    row.ACTIVE = false;\\n    if(row[innerArr]){\\n      _.each(row[innerArr], function(rowIn){\\n        rowIn.ACTIVE = false;\\n      });\\n    }\\n  });\\n};\\n//устанавливаем аттрибут\\nfunction setAttr(arr, innerArr, attr){\\n  _.each(arr, function(row){\\n    if(row[innerArr]){\\n      var rowInner =_.find(row[innerArr], function(rowIn){return rowIn.SELECTED_LESSON_CNT});\\n      if(rowInner){row[attr] = true}else{row[attr] = false}\\n    }\\n  });\\n};\\n\\nform.on(\\"open-hide:click\\", function(data, action){\\n  data.OPEN = !data.OPEN;\\n  form.render();\\n});\\n\\nform.on(\\"render\\", function(){\\n  setAttr(form.data.PASHA_LIST, \'DAY_LIST\', \'IS_INNER_SRVS\');\\n});\\nform.on(\\"edit:click\\", function(data, action){\\n  setAllUnAct(form.data.PASHA_LIST, \'DAY_LIST\')\\n  data.ACTIVE = true;\\n    //получение дня в пользовательском календаре\\n    function getPcDay(dayNum_){\\n\\t\\tvar arr = makeArrFlat(sch.CALC_PASHA_CALENDAR, \'DAY_LIST\');\\n      var pCalDay = {};\\n      var pCal = _.find(arr, function(pc){\\n        return(pc.DAY_NUM === dayNum_);\\n      });\\n      if(pCal){\\n        pCalDay = pCal;\\n      }\\n      else{\\n        pCalDay.DAY_NUM      = dayNum_;\\n        pCalDay.COMMENT      = \'\';\\n        pCalDay.HOLYDAY      = false;\\n        pCalDay.SERV_LIST    = [];\\n        pCalDay.NOT_ADD_SRVS = false;\\n      }\\n      return pCalDay;\\n    };\\n    var pNowDay = getPcDay(data.DAY_NUM);\\n    var pPrevDay = getPcDay(data.DAY_NUM-1);\\n\\n    var params = {N_DATA: pNowDay, P_DATA: pPrevDay};\\n  form.loadModalDialog(\\"PASHA_DAY_EDITOR\\", params, \\"dialog-day-editor\\", function(f){\\n// console.log(f.data);\\n f.on(\\"render\\", function(){\\n      //установить значения для записи в пользовательском календаре\\n      function setPcRow(d_){\\n\\t\\t  // подготавливаем массив служб\\n        var info = \'\';\\n        _.each(d_.SERV_LIST, function(r){\\n          //проставляем время в милисекундах для сортировки\\n          r.TIME_MS = getTimeMS(r.TIME);\\n          var serv = _.find(sch.LISTS.SRVS.ROWS, function(s){return s.SERV_CODE == r.SERV_CODE;});\\n          if(serv){\\n            //если выбрана \\"другая\\"(ANOTHER) служба - берем название из ANOTHER_SERV\\n            if(serv.SERV_CODE == \\"ANOTHER\\"){\\n              r.SERV = r.ANOTHER_SERV\\n            }\\n            else{\\n              r.SERV = serv.SERV;\\n            }               \\n          }\\n          if(r.SERV_CODE && (r.SERV_CODE ==\'LIT\' ||r.SERV_CODE ==\'LIT1\' ||r.SERV_CODE ==\'LIT2\' ||r.SERV_CODE ==\'LIT3\')){\\n            r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS+\' исп.: \'+r.ISP_CNT+\' прич: \'+r.PRICH_CNT;\\n          }else{\\n            r.INFO_JORN = r.TIME+\' \'+r.SERV+\' служил: \'+r.SERVUS;\\n          }\\n          r.INFO_SCH = r.TIME+\' \'+r.SERV;\\n          info = info+\' / \'+r.INFO_SCH+\' /\';\\n        });\\n        d_.INFO = info;\\n        //сортируем по времени\\n        d_.SERV_LIST.sort((prev, next) => prev.TIME_MS - next.TIME_MS);\\n\\t\\td_.SELECTED_LESSON_CNT = d_.SERV_LIST.length;\\n        if(d_.SERV_LIST.length == 0){d_.NOT_ADD_SRVS = false;}\\n\\t\\t  _.each(sch.CALC_PASHA_CALENDAR, function(rowCP){\\n\\t\\t\\tif(rowCP.DAY_NUM == d_.DAY_NUM){    \\n\\t\\t\\t  rowCP = d_;\\n\\t\\t\\t}\\n\\t\\t\\tif(rowCP.DAY_LIST){\\n\\t\\t\\t  _.each(rowCP.DAY_LIST, function(rowDl){\\n\\t\\t\\t\\tif(rowDl.DAY_NUM == d_.DAY_NUM){    \\n\\t\\t\\t\\t  rowDl = d_;\\n\\t\\t\\t\\t}\\n\\t\\t\\t  });\\n\\t\\t\\t}\\n\\t\\t  });\\n\\t\\t\\n      };\\n\\n      f.on(\\"save:click\\", function(d, action){\\n        //записываем в настоящий день\\n        setPcRow(f.data.N_DATA);\\n        //записываем в предыдущий день\\n        setPcRow(f.data.P_DATA);\\n        //сохраняем в хранилище\\n        //\\n        setValue({code: \'CALC_PASHA_CALENDAR\', value: form.data.PASHA_LIST});\\t\\n\\n        form.closeDialog(\\"dialog-day-editor\\");\\n        form.reload();\\n      });\\n\\n\\n    });\\n  });\\n});\\n","visModel":{"id":"pc-73","ftype":"container","type":"BS_PANEL","title":"Календарь событий относительно Пасхи","fields":[{"id":"pc-82","condition":"true","ftype":"array","type":"REPORT","label":"","title":"","source":"PASHA_LIST","fields":[{"id":"pc-404","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"EVENT","is_top_navbar":"","buttons":[{"id":"pc-617","_type":"BUTTON_CONSTR","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","text":""},{"id":"pc-23","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Служба отмечена как обязательная","action":"","css":"btn btn-default btn-text","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"data.HOLYDAY","icon":"glyphicon glyphicon-ok green glyphicon-x2","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-255","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Редактировать","action":"edit","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"!data.SELECTED_LESSON_CNT||(data.SELECTED_LESSON_CNT&&data.SELECTED_LESSON_CNT == 0)","icon":"glyphicon glyphicon-pencil  glyphicon-x2","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-789","condition":"data.SELECTED_LESSON_CNT&&data.SELECTED_LESSON_CNT > 0","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"edit","tooltip":"Редактировать","icon":"glyphicon glyphicon-pencil  green glyphicon-x2","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-287","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"открыть-скрыть седмичные дни","action":"open-hide","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"!data.IS_INNER_SRVS","icon":"glyphicon glyphicon-list glyphicon-x2","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-18","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"открыть-скрыть седмичные дни. ТАМ ЕСТЬ ЕЩЕ!","action":"open-hide","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"data.IS_INNER_SRVS","icon":"glyphicon glyphicon-list green glyphicon-x2","source_action":"","source_title":"","source_tooltip":"","source_icon":""}],"fields":[{"id":"pc-808","condition":"data.OPEN","ftype":"array","type":"REPORT","label":"","title":"","source":"DAY_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"edir","fields":[{"id":"pc-213","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"EVENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-179","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-450","condition":"data.HOLYDAY","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"Служба отмечена как обязательная","icon":"glyphicon glyphicon-ok green","css":"btn btn-default btn-text","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-747","condition":"!data.SELECTED_LESSON_CNT||(data.SELECTED_LESSON_CNT&&data.SELECTED_LESSON_CNT == 0)","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"edit","tooltip":"Редактировать","icon":"glyphicon glyphicon-pencil  glyphicon","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-271","condition":"data.SELECTED_LESSON_CNT&&data.SELECTED_LESSON_CNT > 0","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"edit","tooltip":"Редактировать","icon":"glyphicon glyphicon-pencil green glyphicon","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"show_header":"","_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":""}],"grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"6","_type":"UL_CONSTR","_active":"","action":"","show_header":""},{"id":"pc-728","condition":"true","ftype":"container","type":"DIALOG","label":"","title":"","width":"900px","height":"600px","dialog_id":"dialog-day-editor","source_title":"","source":"","_type":"BUTTON_CONSTR","_active":""}],"condition":"true","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":true,"css":"","hide_header":"","source_css":"","source_title":"TITLE","is_top_navbar":"true","buttons":[],"sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"PASHA_LIST":[{"EVENT":"","DAY_LIST":[{}]}],"TITLE":""}},"PASHA_DAY_EDITOR":{"formId":"dialog-day-editor","actions":[],"innerForms":[],"id":"70","code":"PASHA_DAY_EDITOR","name":"Редактор дня календаря (Пасхального)","visParams":"[]","get_":"","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.data = form.params;\\nform.data.SERV_LIST_EV = form.data.SERV_LIST_EV||[];\\nform.data.SERV_LIST = form.params.SERV_LIST||[];\\n//смена аттрибута, запрещающего добавлять дополнительные службы в этот день\\nform.on(\\"holyday-change:click\\", function(data){\\n  form.data.N_DATA.HOLYDAY = !form.data.N_DATA.HOLYDAY;\\n  //form.params.HOLYDAY = form.data.HOLYDAY;\\n  form.render();\\n});\\nform.on(\\"flag-change:click\\", function(data){\\n  if(form.data.N_DATA)form.data.N_DATA.NOT_ADD_SRVS = !form.data.N_DATA.NOT_ADD_SRVS;\\n  //form.params.NOT_ADD_SRVS = form.data.NOT_ADD_SRVS;\\n  form.render();\\n});\\n    console.log(form.data);\\n\\n//form.data.TITLE_SERV_MR = \'Служба на \'+form.data.EVENT;\\n\\n/*_.each(form.data.SERV_LIST, function(r){\\n  if(r.SERV_CODE == \\"ANOTHER\\"){\\n    r.ANOTHER_SERV = r.SERV\\n  }\\n});*/\\nif(form.data.N_DATA){\\n  form.data.EVENT = form.data.N_DATA.EVENT;\\n  form.data.N_DATA.TITLE_SERV = \'Служба на \'+form.data.N_DATA.EVENT;\\n  form.data.N_DATA.SERV_LIST = form.data.N_DATA.SERV_LIST||[];\\n}\\nif(form.data.P_DATA){\\n  form.data.P_DATA.TITLE_SERV = \'Служба на \'+form.data.P_DATA.EVENT;\\n  form.data.P_DATA.SERV_LIST = form.data.P_DATA.SERV_LIST||[];\\n}\\n\\nvar obj = {};\\n_.each(sch.LISTS.SRVS.ROWS, function(p){\\n  obj[p.SERV_CODE] = p.SERV;\\n});\\n//\\n//изменение службы \\nform.on(\\"SERV_CODE:change\\", function(data){\\n  var serv = _.find(sch.LISTS.SRVS.ROWS, function(s){return s.SERV_CODE == data.SERV_CODE;});\\n  if(serv){\\n    if(data.SERV_CODE == \\"ANOTHER\\"){\\n      data.SERV = serv.ANOTHER_SERV; data.SERV_TYPE = serv.SERV_TYPE\\n    }\\n    else{\\n      data.SERV = serv.SERV; data.SERV_TYPE = serv.SERV_TYPE\\n    } \\n  }\\n  form.render();\\n});\\n\\n//добавление службы \\n\\nform.on(\\"add-serv-ev:click\\", function(data, action){\\n  form.data.P_DATA.SERV_LIST.push({\\n    TIME : sch.SETTINGS.EVENING_SERV_TIME, \\n    SRVS: obj,\\n    SERVUS: sch.SETTINGS.SERVUS,\\n    SERV_CODE: sch.SETTINGS.EVENING_SERV_CODE,\\n    SERV_TYPE: sch.SETTINGS.EVENING_SERV_TYPE\\n  }); \\n  form.render();\\n});\\nform.on(\\"add-serv-mr:click\\", function(data, action){\\n  form.data.N_DATA.SERV_LIST.push({\\n    TIME : sch.SETTINGS.MORNING_SERV_TIME, \\n    SRVS: obj,\\n    SERVUS: sch.SETTINGS.SERVUS,\\n    SERV_CODE: sch.SETTINGS.MORNING_SERV_CODE,\\n    SERV_TYPE: sch.SETTINGS.MORNING_SERV_TYPE\\n  }); \\n  //form.params.SERV_LIST_MR = form.data.SERV_LIST_MR;\\n  form.render();\\n});\\nform.on(\\"del-serv-ev:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.P_DATA.SERV_LIST, data);\\n  var arr = [];\\n  _.each(form.data.P_DATA.SERV_LIST, function(r,i){\\n    if(i != indx)arr.push(r);\\n  });\\n  form.data.P_DATA.SERV_LIST = arr;\\n  form.render();\\n});\\n\\nform.on(\\"del-serv-mr:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.N_DATA.SERV_LIST, data);\\n  var arr = [];\\n  _.each(form.data.N_DATA.SERV_LIST, function(r,i){\\n    if(i != indx)arr.push(r);\\n  });\\n  form.data.N_DATA.SERV_LIST = arr;\\n  form.render();\\n});\\n","visModel":{"id":"pc-205","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","css":"","source_css":"","source_title":"EVENT","is_top_navbar":"","buttons":[{"id":"pc-361","_type":"UL_CONSTR","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","fields":[{"id":"pc-105","ftype":"field","type":"BS_CHECK","label":"","title":"","tooltip":"Выделить как обязательный","action":"holyday-change","source":"HOLYDAY","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","as_button":"true","source_title":"","source_tooltip":"","_type":"BUTTON_CONSTR","_active":true},{"id":"pc-573","ftype":"field","type":"BS_CHECK","label":"","title":"","tooltip":"Запрет добавлять в этот день еще службы","action":"flag-change","source":"NOT_ADD_SRVS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"form.data.N_DATA&&form.data.N_DATA.SERV_LIST && form.data.N_DATA.SERV_LIST.length > 0","as_button":"true","source_title":"","source_tooltip":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-744","ftype":"field","type":"BS_BUTTON","label":"","title":"сохранить","tooltip":"сохранить","action":"save","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-30","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"600px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-554","ftype":"field","type":"TITLE","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","size":"3","text":"Основное событие","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-31","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","fields":[{"id":"pc-896","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"200px","width":"100%","margin":"0 0 20px 0","padding":"0px","fields":[{"id":"pc-295","_type":"BUTTON_CONSTR","ftype":"field","type":"TEXT_AREA","label":"Основное событие","title":"Основное событие","source":"EVENT","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"12","_active":"","condition":"true","width":"100%","required":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-506","_type":"BUTTON_CONSTR","ftype":"field","type":"TITLE","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","size":"3","text":"Службы по умолчанию"},{"id":"pc-503","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","fields":[{"id":"pc-547","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-645","ftype":"container","type":"OBJECT","label":"","title":"","source":"P_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"6","condition":"true","fields":[{"id":"pc-954","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"6","_type":"PANEL_CONSTR","_active":"","css":"","hide_header":"","source_css":"","source_title":"TITLE_SERV","is_top_navbar":"","buttons":[{"id":"pc-499","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-serv-ev","tooltip":"добавить строку","icon":"glyphicon glyphicon-plus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-103","condition":"true","ftype":"array","type":"REPORT","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","title":"","source":"SERV_LIST","action":"","show_header":"","fields":[{"id":"pc-247","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","source":"TIME","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","width":"100px","required":"","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-699","condition":"","ftype":"container","type":"DIV","label":"","title":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","_type":"UL_CONSTR","_active":"","width":"200px","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-273","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"20px","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-397","condition":"data.SERV_CODE == \'ANOTHER\'","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"200px","source":"ANOTHER_SERV","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""}]},{"id":"pc-9","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","action":"del-serv-ev","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"_type":"UL_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""},{"id":"pc-939","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"N_DATA","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"6","fields":[{"id":"pc-406","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"6","_type":"PANEL_CONSTR","_active":"","css":"","hide_header":"","source_css":"","source_title":"TITLE_SERV","is_top_navbar":"","buttons":[{"id":"pc-892","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-serv-mr","tooltip":"добавить строку","icon":"glyphicon glyphicon-plus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}],"fields":[{"id":"pc-440","condition":"true","ftype":"array","type":"REPORT","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","title":"","source":"SERV_LIST","action":"","show_header":"","fields":[{"id":"pc-292","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","source":"TIME","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","width":"100px","required":"","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-761","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"200px","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-937","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"20px","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-195","condition":"data.SERV_CODE == \'ANOTHER\'","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"200px","source":"ANOTHER_SERV","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-771","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","action":"del-serv-mr","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"_type":"UL_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":"","div_id":"","text_align":"left","overflow":"auto","height":"250px","width":"100%","margin":"0px","padding":"0px"}],"_type":"UL_CONSTR","_active":""}],"grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","hide_header":"","sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"EVENT":"","TITLE_SERV":"","SERV_LIST":[{"SRVS":""}]}},"CALENDAR_SETT":{"formId":"inner-container","actions":[],"innerForms":[],"id":"71","code":"CALENDAR_SETT","name":"Календарь Настройки","visParams":"[{\\"NAME\\":\\"MODE\\",\\"DESCR\\":\\"режим работы\\"}]","get_":"$params = json_decode($_POST[\'PARAMS\']);\\n//class forms {};\\n//$object = new forms();\\n//$response = new forms();\\n//получаем форму\\nif($params->CODE){\\n\\tclass forms {};\\n\\t$response = new forms();\\n\\t$query_ = \\"SELECT `ID`, `CODE`, `NAME`, `PARAMS`, `GET_`, `PUT_`, `DELETE_`, `AJAX`, `VIS_MODEL`, `DATA_MODEL`, `JS`, `STATUS`, `PARENT_`, `DATE_CRT`, `DATE_MOD` \\n    FROM `constr_forms` WHERE CODE = \'\\".$params->CODE.\\"\'\\";\\t\\n\\t$sql = workWithBD($query_);\\n\\twhile ($obj = mysqli_fetch_object($sql)){\\n\\t\\t$response->id = $obj->ID;\\n\\t\\t$response->code = $obj->CODE;\\n\\t\\t$response->name = $obj->NAME;\\n\\t\\t$response->params = $obj->PARAMS;\\n\\t\\t$response->get_ = $obj->GET_;\\n\\t\\t$response->put_ = $obj->PUT_;\\n\\t\\t$response->delete_ = $obj->DELETE_;\\n\\t\\t$response->ajax = $obj->AJAX;\\n\\t\\t$response->js = $obj->JS;\\n\\t\\t$response->parent_ = $obj->PARENT_;\\n\\t\\t$response->vismodel = json_decode($obj->VIS_MODEL);\\n\\t\\t$response->datamodel = json_decode($obj->DATA_MODEL);\\n\\t};\\t\\n\\techo json_encode($response);\\n};\\n\\n","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.params = form.params||[];\\n$(\'#inner-container > div > div.panel-heading.panel-title-ok.top-sub-navbar > div.bs-panel-title-row > div > h3\')\\n  .animate({opacity:0, fontSize: \\"30px\\"}, 400, \\"swing\\", function(){\\n  $(\'#inner-container > div\').css(\\"background-color\\", \\"#f5f5f5db\\");\\n  $( this ).css(\\"color\\", \\"green\\");\\n  $( this ).animate({opacity:1, fontSize: \\"24px\\"}, 400, \\"swing\\", function(){\\n    $(\'#inner-container > div\').css(\\"background-color\\", \\"#fff\\");\\n    $( this ).css(\\"color\\", \\"black\\");\\n  });\\n});  \\n//загрузка навигации приложения\\nformLoad(\\"CALENDAR_HOR_NAV\\", {MODE:\'SETT\'}, \\"horizont-panel\\", function(frm){\\n  //изменение режима отображения \\n  frm.on(\\"USER_CALENDAR:click PC:click EVENTS:click EASY_EVENTS:click REMOVE:click PRINT:click SETT:click TMPL:click ARHIVE:click\\", \\n         function(data, action){\\n    //закрываем диалог, если ранее забыли это сделать \\n    form.closeDialog(\\"dialog-day-editor\\");\\n    form.params.MODE = action;\\n    if(action == \'PC\'){formLoad(\\"CALENDAR_PASHA\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'PRINT\'){\\n      form.params.PRINT_MODE = form.params.PRINT_MODE||\'P_SCHEDULE\';\\n      formLoad(\\"CALENDAR_PRINT\\", form.params, \\"inner-container\\", function(frm){});\\n    }\\n    if(action == \'SETT\'){form.reload();}\\n    if(action == \'TMPL\'){formLoad(\\"CALENDAR_TMPL\\", form.params, \\"inner-container\\", function(frm){});}\\n    if((action != \'PC\')&&(action != \'PRINT\')&&(action != \'SETT\')&&(action != \'TMPL\')){formLoad(\\"CALENDAR_1\\", form.params, \\"inner-container\\", function(frm){});}\\n  });  \\n});\\nform.data = sch;\\nform.on(\\"save:click\\", function(data, action){\\n  setValue({code: \'USER_SETTINGS\', value: form.data.SETTINGS});\\t\\n  sch.SETTINGS = form.data.SETTINGS;\\n  setValue({code: \'LISTS\', value: form.data.LISTS});\\t\\n  sch.LISTS = form.data.LISTS;\\n  $(\'#msg\').css({\\"background-color\\":\\"green\\", \\"display\\":\\"block\\", \\"border-color\\":\\"white\\", \\"color\\":\\"white\\" });\\n  var msg = \'Данные сохранены\';\\n  $(\'#msg strong\').text(msg);\\n  $(\'#msg\').animate({opacity: 1},100);\\n  setTimeout(function(){\\n    $(\'#msg\').animate({opacity: 0},150, function(){$(\'#msg\').css({\\"display\\":\\"none\\"});});\\t\\t\\t\\n    $(\'#msg .close\').click(function(){\\n      $(\'#msg\').css({\\"display\\":\\"none\\"});\\n    });\\t\\t\\t\\n  },700);\\n\\n});\\n\\n//службы\\nform.on(\\"NUM:change\\", function(data){\\n  form.data.LISTS.SRVS.ROWS.sort((prev, next) => prev.NUM - next.NUM);\\n  form.data.LISTS.SERVUSES.ROWS.sort((prev, next) => prev.NUM - next.NUM);\\n  form.render();\\n});\\nform.on(\\"add-srv:click\\", function(data, action){\\n  form.data.LISTS.SRVS.ROWS.push({NUM: sch.LISTS.SRVS.ROWS.length+1, SERV_TYPE:\'PUBLIC\', SERV_CODE:\'\', SERV:\\"\\"}); \\n  form.render();\\n});\\nform.on(\\"del-srv:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.LISTS.SRVS.ROWS, data);\\n  var arr = [];\\n  _.each(form.data.LISTS.SRVS.ROWS, function(r,i){\\n    if(i != indx){arr.push(r);}\\n  });\\n  form.data.LISTS.SRVS.ROWS = arr;\\n  form.render();\\n});\\n//служащие\\nform.on(\\"add-serv:click\\", function(data, action){\\n  form.data.LISTS.SERVUSES.ROWS.push({NUM: sch.LISTS.SERVUSES.ROWS.length+1, SERVUS:\\"\\"}); \\n  form.render();\\n});\\nform.on(\\"del-serv:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.LISTS.SERVUSES.ROWS, data);\\n  var arr = [];\\n  _.each(form.data.LISTS.SERVUSES.ROWS, function(r,i){\\n    if(i != indx){arr.push(r);}\\n  });\\n  form.data.LISTS.SERVUSES.ROWS = arr;\\n  form.render();\\n});\\n\\n//Пасхалия\\nform.on(\\"add-p:click\\", function(data, action){\\n  var lastYear = form.data.LISTS.YEARS.ROWS[form.data.LISTS.YEARS.ROWS.length -1];\\n  lastYear.WRITE = false;\\n  var code = parseInt(lastYear.CODE)+1;\\n  var obj = {CODE: code, VAL:lastYear.CODE+\\"-\\"+code, PREV_PD: lastYear.NOW_PD, NOW_PD: getFormatDate(new Date(new Date().setFullYear(code))), WRITE: true};\\n  form.data.LISTS.YEARS.ROWS.push(obj); \\n  form.render();\\n});\\nform.on(\\"del-p:click\\", function(data, action){\\n  var lastYear = form.data.LISTS.YEARS.ROWS.pop();\\n  form.render();\\n});\\n\\n","visModel":{"id":"pc-382","ftype":"container","type":"BS_PANEL","title":"Настройки","fields":[{"id":"pc-388","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Настройки","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-8","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"SETTINGS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-896","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","title":"Редактор дня","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-662","condition":"true","ftype":"field","type":"BS_TEXT","label":"Организация","title":"","width":"100%","source":"ORG_NAME","placeholder":"","required":"","mask":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-611","condition":"false","ftype":"field","type":"BS_TEXT","label":"Служащий (по умолчанию)","title":"","width":"100%","source":"SERVUS","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-918","condition":"true","ftype":"field","type":"BS_TEXT","label":"Верхний контитул","title":"","width":"100%","source":"PRINT_HEADER","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-460","condition":"true","ftype":"field","type":"BS_TEXT","label":"Контактный телефон","title":"","width":"100%","source":"PHONE","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":"+7(999)999?-99-99"},{"id":"pc-175","condition":"true","ftype":"field","type":"BS_TEXT","label":"Сайт","title":"","width":"100%","source":"SITE","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-972","condition":"true","ftype":"field","type":"BS_TEXT","label":"Время вечерней службы","title":"","width":"100%","source":"EVENING_SERV_TIME","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-408","condition":"true","ftype":"field","type":"BS_TEXT","label":"Время утренней службы","title":"","width":"100%","source":"MORNING_SERV_TIME","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-400","condition":"true","ftype":"field","type":"BS_TEXT","label":"макс. исп.","title":"","width":"100%","source":"MAX_RAND_ISP","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-486","condition":"true","ftype":"field","type":"BS_TEXT","label":"макс. прич.","title":"","width":"100%","source":"MAX_RAND_PRICH","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":"","css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[]},{"id":"pc-556","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"LISTS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-697","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Службы","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","fields":[{"id":"pc-211","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"SRVS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-643","condition":"true","ftype":"array","type":"REPORT","label":"","title":"Редактор дня","source":"ROWS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-138","condition":"true","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"100px","source":"NUM","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","placeholder":"","mask":"9?9","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-962","condition":"true","ftype":"field","type":"BS_TEXT","label":"Тип","title":"","width":"100%","source":"SERV_TYPE","placeholder":"","required":"","mask":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-740","condition":"true","ftype":"field","type":"BS_TEXT","label":"Код","title":"","width":"100%","source":"SERV_CODE","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-664","condition":"true","ftype":"field","type":"BS_TEXT","label":"Наименование","title":"","width":"100%","source":"SERV","required":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-354","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"del-srv","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"action":"","show_header":"","_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[{"id":"pc-872","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"добавить строку","action":"add-srv","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","icon":"glyphicon glyphicon-plus gray ","source_action":"","source_title":"","source_tooltip":"","source_icon":""}]},{"id":"pc-177","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Служащие","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","fields":[{"id":"pc-713","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"SERVUSES","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-439","condition":"true","ftype":"array","type":"REPORT","label":"","title":"Редактор дня","source":"ROWS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-425","condition":"true","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"100px","source":"NUM","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","placeholder":"","mask":"9?9","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-974","condition":"true","ftype":"field","type":"BS_TEXT","label":"Тип","title":"","width":"100%","source":"SERVUS","placeholder":"","required":"","mask":"","grid_start_new_row":"true","grid_label_cols":"4","grid_field_cols":"8","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-940","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"del-serv","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}],"action":"","show_header":"","_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[{"id":"pc-34","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"добавить строку","action":"add-serv","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","icon":"glyphicon glyphicon-plus gray ","source_action":"","source_title":"","source_tooltip":"","source_icon":""}]},{"id":"pc-162","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Пасхалия","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","fields":[{"id":"pc-923","condition":"true","ftype":"container","type":"OBJECT","label":"","title":"","source":"YEARS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","fields":[{"id":"pc-147","condition":"true","ftype":"array","type":"REPORT","label":"","title":"Редактор дня","source":"ROWS","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","fields":[{"id":"pc-772","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"Год","title":"","source":"CODE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-743","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"Период","title":"","source":"VAL","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-979","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"Прошлая Пасха","title":"","source":"PREV_PD","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-314","condition":"true","ftype":"container","type":"DIV","label":"Настоящая Пасха","title":"","width":"200px","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-356","condition":"!data.WRITE","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"NOW_PD","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-48","condition":"data.WRITE","ftype":"field","type":"DATE","label":"","title":"","width":"","source":"NOW_PD","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"action":"","show_header":""}]}],"css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[{"id":"pc-206","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"добавить строку","action":"add-p","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","icon":"glyphicon glyphicon-plus gray ","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-750","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","action":"del-p","tooltip":"удалить","icon":"glyphicon glyphicon-minus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":""}]}],"_type":"UL_CONSTR","_active":""}],"condition":"true","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","_type":"PANEL_CONSTR","_active":true,"hide_header":"","source_css":"","source_title":"","is_top_navbar":"true","buttons":[{"id":"pc-939","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"сохранить","tooltip":"сохранить настройки","action":"save","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":""}],"sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"ROWS":[{}]}},"CALENDAR_PRINT":{"formId":"inner-container","actions":[],"innerForms":[],"id":"69","code":"CALENDAR_PRINT","name":"Годичный календарь. Печать","visParams":"[{\\"NAME\\":\\"PRINT_MODE\\",\\"DESCR\\":\\"режим печати\\"}]","get_":"","put_":"","delete_":"","ajax":" ","parent_":"0","js":"form.params = form.params||[];\\n$(\'#inner-container > div > div.panel-heading.panel-title-ok.top-sub-navbar > div.bs-panel-title-row > div > h3\')\\n  .animate({opacity:0, fontSize: \\"30px\\"}, 400, \\"swing\\", function(){\\n  $(\'#inner-container > div\').css(\\"background-color\\", \\"#f5f5f5db\\");\\n  $( this ).css(\\"color\\", \\"green\\");\\n  $( this ).animate({opacity:1, fontSize: \\"24px\\"}, 400, \\"swing\\", function(){\\n    $(\'#inner-container > div\').css(\\"background-color\\", \\"#fff\\");\\n    $( this ).css(\\"color\\", \\"black\\");\\n  });\\n});  \\n\\n\\nform.data.BAPTISMS        = form.params.BAPTISMS;\\nform.data.WEDDINGS        = form.params.WEDDINGS;\\nform.data.FUNERAL_SERVICE = form.params.FUNERAL_SERVICE;\\nform.data.SOB             = form.params.SOB;\\nform.data.PUBLIC          = form.params.PUBLIC;\\n\\n//загрузка навигации приложения\\nformLoad(\\"CALENDAR_HOR_NAV\\", {MODE:\'PRINT\'}, \\"horizont-panel\\", function(frm){\\n  //изменение режима отображения \\n  frm.on(\\"USER_CALENDAR:click PC:click EVENTS:click EASY_EVENTS:click REMOVE:click PRINT:click SETT:click TMPL:click ARHIVE:click\\", \\n         function(data, action){\\n    form.params.MODE = action;\\n    if(action == \'PC\'){formLoad(\\"CALENDAR_PASHA\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'PRINT\'){form.reload();}\\n    if(action == \'SETT\'){formLoad(\\"CALENDAR_SETT\\", form.params, \\"inner-container\\", function(frm){});}\\n    if(action == \'TMPL\'){formLoad(\\"CALENDAR_TMPL\\", form.params, \\"inner-container\\", function(frm){});}\\n    if((action != \'PC\')&&(action != \'PRINT\')&&(action != \'SETT\')&&(action != \'TMPL\')){formLoad(\\"CALENDAR_1\\", form.params, \\"inner-container\\", function(frm){});}\\n  });  \\n});\\n\\nform.data.FROM_DATE = form.params.FROM_DATE||getFormatDate(new Date());\\nform.data.TO_DATE = form.params.TO_DATE||getFormatDate(new Date());\\nform.data.YEAR = form.params.YEAR||new Date().getFullYear();\\nform.data.MONTH = form.params.MONTH||new Date().getMonth();\\n//сортируем журнал по дате\\nsch.JORNAL_ROWS.sort((prev, next) => prev.FULL_DATE - next.FULL_DATE);\\nfunction setDateParams(){\\n  form.params.FROM_DATE = form.data.FROM_DATE;\\n  form.params.TO_DATE = form.data.TO_DATE;\\n  form.params.YEAR = form.data.YEAR;\\n  form.params.MONTH = form.data.MONTH;\\n};\\n//выбор временного периода\\nfunction setSelectPeriod(month){\\n  var firstDay,lastDay;\\n  var date = new Date();\\n  date.setFullYear(form.data.YEAR);\\n  if(month && month < 12){\\n    //если выбран один месяц\\n    firstDay = new Date(date.getFullYear(), month, 1);\\n    lastDay = new Date(date.getFullYear(), (parseInt(month) + 1), 0); \\n  }\\n  if(month && month == 12){\\n    //если выбраны все месяцы года\\n    form.data.MONTH = 12;\\n    firstDay = new Date(date.getFullYear(), 0, 1);\\n    lastDay = new Date(date.getFullYear(), 12, 0); \\n  }\\n  form.data.FROM_DATE = getFormatDate(firstDay);\\n  form.data.TO_DATE = getFormatDate(lastDay);\\n  setDateParams();\\n};\\n//setSelectPeriod(form.data.MONTH);\\nvar pObj = {};\\n_.each(sch.LISTS.YEARS.ROWS, function(p){\\n  pObj[p.CODE] = p.CODE;\\n  if(p.CODE == form.data.YEAR){genPashaCalendar(p.PREV_PD, p.NOW_PD);}\\n});\\nform.data.YEAR_LIST = pObj;\\n//изменение года \\nform.on(\\"YEAR:change\\", function(data){\\n  form.params.YEAR = form.data.YEAR;\\n  setSelectPeriod(form.data.MONTH||12);\\n});\\npObj = {};\\npObj[12] = getMonthName(12);\\n//наполняем месяцы\\nfor(var i = 0; i < 12; i++){\\n  pObj[i] = getMonthName(i);\\n};\\nform.data.MONTH_LIST = pObj;\\n//изменение месяца \\nform.on(\\"MONTH:change\\", function(data){\\n  form.params.MONTH = form.data.MONTH;\\n  setSelectPeriod(form.data.MONTH);\\n});\\n//console.log(form.params);\\nvar cssSch, cssPj, cssW, cssFs, cssPb, cssMt = \'\';\\nvar cssB, cssW, cssS, cssF, cssP = \'btn btn-default u-butt\';\\n\\nif(form.params.BAPTISMS){cssB = cssB+\' selected\';}\\nif(form.params.WEDDINGS){cssW = cssW+\' selected\';}\\nif(form.params.FUNERAL_SERVICE){cssF = cssF+\' selected\';}\\nif(form.params.SOB){cssS = cssS+\' selected\';}\\nif(form.params.PUBLIC){cssP = cssP+\' selected\';}\\n\\nif(form.params.PRINT_MODE == \'P_SCHEDULE\'){\\n  form.data.TITLE = \\"Печать расписания\\";\\n  cssSch = \'btn btn-default u-butt selected\';\\n  cssPj = \'btn btn-default u-butt\';\\n  cssMt = \'btn btn-default u-butt\';\\n  if(parseInt(form.data.MONTH) < 12){\\n    form.data.ORG_NAME = sch.SETTINGS.ORG_NAME;\\n    form.data.PRINT_HEADER = sch.SETTINGS.PRINT_HEADER\\n      +getMonthName(form.data.MONTH)+\' \'+form.data.YEAR;\\n    form.data.PRINT_FOOTER = sch.SETTINGS.PRINT_FOOTER;\\n  }\\n}\\nif(form.params.PRINT_MODE == \'P_JORNAL\'){\\n  form.data.TITLE = \\"Печать журнала богослужений\\";\\n form.data.ORG_NAME = \\"\\";\\n form.data.PRINT_HEADER = \\"\\";\\n form.data.PRINT_FOOTER = \\"\\";\\n   cssSch = \'btn btn-default u-butt\';\\n  cssPj = \'btn btn-default u-butt selected\';\\n  cssMt = \'btn btn-default u-butt\';\\n}\\nif(form.params.PRINT_MODE == \'P_METRIKS\'){\\n  form.data.TITLE = \\"Печать метрик\\";\\n form.data.ORG_NAME = \\"\\";\\n form.data.PRINT_HEADER = \\"\\";\\n form.data.PRINT_FOOTER = \\"\\";\\n  cssSch = \'btn btn-default u-butt\';\\n  cssPj = \'btn btn-default u-butt\';\\n  cssMt = \'btn btn-default u-butt selected\';\\n}\\nform.on(\\"P_SCHEDULE:click P_JORNAL:click P_METRIKS:click\\", function(data, action){\\n  form.params.PRINT_MODE = action;\\n  form.reload();\\n});\\nform.data.BUTTON_LIST = [\\n  {ACT: \\"P_SCHEDULE\\", TEXT: \\"Расписание\\",     TOOLTIP: \\"Печать расписания\\", CSS: cssSch},\\n  {ACT: \\"P_JORNAL\\",   TEXT: \\"Журнал\\",      TOOLTIP: \\"Печать журнала богослужений\\", CSS: cssPj},\\n  {ACT: \\"P_METRIKS\\",   TEXT: \\"Метрики\\",      TOOLTIP: \\"Печать метрик\\", CSS: cssMt},\\n];\\n//form.data.BUTTON_LIST.push({ACT: \\"P_WEDDINGS\\",        TEXT: \\"Венчания\\", TOOLTIP: \\"Печать журнала венчаний\\", CSS: cssW});\\n//form.data.BUTTON_LIST.push({ACT: \\"P_FUNERAL SERVICES\\",        TEXT: \\"Отпевания\\",       TOOLTIP: \\"Печать журнала отпеваний\\", CSS: cssFs});\\n//form.data.BUTTON_LIST.push({ACT: \\"P_BAPTISMS\\",         TEXT: \\"Крещения\\",        TOOLTIP: \\"Печать журнала крещений\\", CSS: cssPb});\\n\\nform.on(\\"BAPTISMS:click WEDDINGS:click FUNERAL_SERVICE:click SOB:click PUBLIC:click\\", function(data, action){\\n  form.params[action] = !form.params[action];\\n  form.reload();\\n});\\nform.data.SERV_PARAM_LIST = [\\n  {ACT: \\"BAPTISMS\\",        TEXT: \\"Крещения\\",              TOOLTIP: \\"Печать крещений\\",           CSS: cssB},\\n  {ACT: \\"WEDDINGS\\",        TEXT: \\"Венчания\\",              TOOLTIP: \\"Печать венчаний\\",           CSS: cssW},\\n  {ACT: \\"FUNERAL_SERVICE\\", TEXT: \\"Отпевания\\",             TOOLTIP: \\"Печать отпеваний\\",          CSS: cssF},\\n  {ACT: \\"SOB\\",             TEXT: \\"Соборования\\",           TOOLTIP: \\"Печать соборований\\",        CSS: cssS}\\n];\\nif(form.params.PRINT_MODE == \'P_JORNAL\' ){form.data.SERV_PARAM_LIST.push(\\n  {ACT: \\"PUBLIC\\",          TEXT: \\"Все общественные\\",      TOOLTIP: \\"Печать общественных служб\\", CSS: cssP});}\\n\\n//наполнение списка\\nfunction jornalLoad(){\\n  var arr = [];\\n  var jornalRows = deepCopy(sch.JORNAL_ROWS);\\n  _.each(jornalRows, function(jr){\\n    if(jr&&jr.FORMAT_DATE&&(new Date(jr.FORMAT_DATE) >= new Date(form.data.FROM_DATE))\\n       && (new Date(jr.FORMAT_DATE) <= new Date(form.data.TO_DATE))){\\n\\n      //для расписания убираем требы и все что не нужно показывать в расписании\\n      var arr1 = [];\\n      _.each(jr.SERV_LIST, function(sl){\\n        /*\\n     DECEASED : \'\',\\n    FUN_TYPE : 1,\\n    FUN_TYPE_ : \'Очное отпевание\',\\n    FUN_AGE : 1,\\n    FUN_AGE_ : \'взрослый(-ая)\',\\n    CEMETERY : \'\'\\n  });\\n*/\\n        if(\\n          ((form.params.PRINT_MODE == \'P_SCHEDULE\')&&(sl.SHOW_IN_RASP))//все что можно показывать в расписании\\n          ||(form.params.PUBLIC &&(form.params.PRINT_MODE == \'P_JORNAL\')//журнал\\n             &&((sl.SERV_TYPE == \'PUBLIC\')||(sl.SERV_TYPE == \'ANOTHER\')))//общественные и \\"другие\\" службы\\n          ||(((form.params.PRINT_MODE == \'P_JORNAL\')||(form.params.PRINT_MODE == \'P_METRIKS\'))//журнал\\n             &&(sl.SERV_TYPE == \'PRIVATE\')//частные службы, в т.ч:\\n             &&((form.params.BAPTISMS&&(sl.SERV_CODE == \'BAPTISMS\'))//крещение\\n                ||(form.params.SOB&&(sl.SERV_CODE == \'SOB\'))//соборования\\n                ||(form.params.WEDDINGS&&(sl.SERV_CODE == \'WEDDINGS\'))//венчания\\n                ||(form.params.FUNERAL_SERVICE&&(sl.SERV_CODE == \'FUNERAL_SERVICE\'))//отпевания\\n               ))\\n        ){\\n            sl.INFO_JORN = \' №: \'+sl.SRV_DOC_NUM+\' | дата: \'+getReadDate1(new Date(jr.FORMAT_DATE))+\' \'+getDayName(jr.DAY)+\' | время: \'+sl.TIME\\n              +\' | служба: \'+sl.SERV+\' | служил: \'+sl.SERVUS+\' |\';\\n          if(sl.SERV_CODE == \\"BAPTISMS\\"){\\n            //\\n            sl.INFO_JORN1 = \'крестился(-ась): \'+sl.BAPT_OBJ+\' | пол: \'+sl.BAPT_OBJ_SEX_+\' | возраст: \'+sl.BAPT_OBJ_AGE_\\n              +\' | святой-покровитель: \'+sl.BAPT_SAINT+\' | празднуется: \'+sl.BAPT_SAINT_CELEBR;\\n            sl.INFO_JORN2 = \'крестный отец: \'+sl.BAPT_F+\' | крестная мать: \'+sl.BAPT_M;\\n          }\\n          if(sl.SERV_CODE == \\"WEDDINGS\\"){\\n            //\\n            sl.INFO_JORN1 = \'жених: \'+sl.GROOM+\' | невеста: \'+sl.BRIDE;\\n            sl.INFO_JORN2 = \'свидетели: \'+sl.WITNESSES+\'| чин венчания: \'+sl.WEDD_TYPE_;\\n          }\\n          if(sl.SERV_CODE == \\"FUNERAL_SERVICE\\"){\\n            //\\n            sl.INFO_JORN1 = \'покойник(-ца): \'+sl.DECEASED+\' | возраст: \'+sl.FUN_AGE_\\n              +\' | чин: \'+sl.FUN_TYPE_+\' | кладбище: \'+sl.CEMETERY;\\n            sl.INFO_JORN2 = \'\';\\n          }\\n          if(sl.SERV_CODE == \\"SOB\\"){\\n            //\\n             sl.INFO_JORN1 = \'количество: \'+sl.SOB_CNT+\' чел.\';\\n            sl.INFO_JORN2 = \'\';\\n          }\\n          sl.BIG_DATE = getReadDate1(new Date(jr.FORMAT_DATE))+\' \'+getDayName(jr.DAY);\\n          arr1.push(sl);\\n        }\\n      });\\n      if(arr1.length > 0){\\n        jr.SERV_LIST = arr1;\\n        jr.DAY_NAME = getDayName(jr.DAY);\\n        jr.BIG_DATE = getReadDate1(new Date(jr.FORMAT_DATE))+\' \'+jr.DAY_NAME;\\n        jr.SHORT_DATE = getReadDate1(new Date(jr.FORMAT_DATE), true) +\' \'+jr.DAY_NAME;\\n        arr.push(jr);\\n      }\\n    }\\n  });\\n  form.data.JORNAL_ROWS = arr;\\n  //console.log(form.data.JORNAL_ROWS);\\n};\\njornalLoad();\\n\\n//console.log(form.data); \\nform.on(\\"load-list:click\\", function(data, action){\\n  form.reload();\\n});\\nform.on(\\"FROM_DATE:change TO_DATE:change select_:click\\", function(data){\\n  setDateParams();\\n});\\nform.on(\\"print:click\\", function(data, action){\\n  //Печать\\n  function pageCleaner(){\\n    $(\'body\').removeClass(\'printSelected\');\\n    $(\'.printSelection\').remove(); \\n  };\\n  //добавляем класс <body> \\n  $(\'body\').addClass(\'printSelected\');      \\n  //создаем \\"призрачный\\" блок для печати \\n  $(\'body\').append(\\"<div class=\'printSelection\'></div>\\");   \\n  // вставляем в блок то, что нужно вывести на печать (в данном случае лишь картинку)      \\n  $(\'#print-page\').clone().appendTo(\'.printSelection\');    \\n  // $(\'.printSelection\').html(\'#print-page\');    \\n  // выводим на печать        \\n  window.print();  \\n  // затираем следы\\n  window.setTimeout(pageCleaner, 0);  /**/\\n});","visModel":{"id":"pc-46","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","fields":[{"id":"pc-115","ftype":"container","type":"DIV","label":"","title":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","condition":"true","fields":[{"id":"pc-514","condition":"true","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-659","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"ORG_NAME","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","text":"","size":"2","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-494","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"PRINT_HEADER","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","text":"","size":"2","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-358","condition":"true","ftype":"array","type":"REPORT","label":"","title":"","source":"JORNAL_ROWS","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","action":"select-date","show_header":"","fields":[{"id":"pc-117","condition":"(form.data.MONTH ==12) || (form.params.PRINT_MODE == \'P_JORNAL\')","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"дата","source":"BIG_DATE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-403","condition":"(form.data.MONTH < 12) && (form.params.PRINT_MODE == \'P_SCHEDULE\')","ftype":"field","type":"TITLE","label":"","title":"дата","source":"SHORT_DATE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","size":"3","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-103","condition":"true","ftype":"array","type":"REPORT","label":"","title":"службы","source":"SERV_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","fields":[{"id":"pc-626","condition":"(form.params.PRINT_MODE == \'P_JORNAL\')","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO_JORN","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-891","condition":"form.params.PRINT_MODE == \'P_SCHEDULE\'","ftype":"field","type":"TITLE","label":"","title":"","source":"INFO_SCH","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","text":"","size":"3","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-518","condition":"form.params.PRINT_MODE == \'P_METRIKS\'","ftype":"container","type":"GRID_SECTION","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","fields":[{"id":"pc-296","condition":"","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO_JORN","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"12","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-329","_type":"BUTTON_CONSTR","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO_JORN1","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"12","_active":"","condition":"","text":""},{"id":"pc-302","condition":"","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO_JORN2","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"12","text":"","_type":"BUTTON_CONSTR","_active":""}]}],"action":"","show_header":"","_type":"UL_CONSTR","_active":""},{"id":"pc-416","condition":"form.params.PRINT_MODE == \'P_SCHEDULE\'","ftype":"field","type":"TITLE","label":"","title":"событие","source":"COMMENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","size":"3","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-300","condition":"form.params.PRINT_MODE == \'P_JORNAL\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"событие","source":"COMMENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-949","condition":"form.params.PRINT_MODE == \'P_JORNAL\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"подпись","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"BUTTON_CONSTR","_active":"","text":"_____________"}],"_type":"UL_CONSTR","_active":""},{"id":"pc-290","condition":"true","ftype":"field","type":"TITLE","label":"","title":"","source":"PRINT_FOOTER","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"12","text":"","size":"3","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":"","width":"100%","div_id":"print-page","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"10px","css":""}],"grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"TITLE","is_top_navbar":"true","buttons":[{"id":"pc-462","condition":"true","ftype":"container","type":"BUTTON_GROUP","label":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","vertical":"","fields":[{"id":"pc-266","ftype":"array","type":"HORISONT_LIST","label":"","title":"","source":"BUTTON_LIST","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"4","condition":"true","fields":[{"id":"pc-962","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"","icon":"","css":"","source_action":"ACT","source_title":"TEXT","source_tooltip":"TOOLTIP","source_icon":"","source_css":"CSS","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":"","text_align":"center"},{"id":"pc-259","_type":"UL_CONSTR","ftype":"array","type":"HORISONT_LIST","label":"","title":"","source":"SERV_PARAM_LIST","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"4","_active":"","condition":"form.params.PRINT_MODE == \'P_JORNAL\' || form.params.PRINT_MODE == \'P_METRIKS\'","fields":[{"id":"pc-765","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","tooltip":"","source_title":"TEXT","source_tooltip":"TOOLTIP","icon":"","css":"","source_action":"ACT","source_icon":"","source_css":"CSS","_type":"BUTTON_CONSTR","_active":""}],"text_align":"center"}],"_type":"UL_CONSTR","_active":""},{"id":"pc-996","ftype":"field","type":"DATE","label":"От","title":"Дата от:","source":"FROM_DATE","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","condition":"true","width":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-525","_type":"BUTTON_CONSTR","ftype":"field","type":"DATE","label":"До","title":"Дата до:","source":"TO_DATE","grid_start_new_row":"","grid_label_cols":"1","grid_field_cols":"1","_active":"","condition":"true","width":""},{"id":"pc-402","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_SELECT_LIST","label":"Выбор года","title":"","css":"","source":"YEAR","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"true","font_size":"27","source_list":"YEAR_LIST"},{"id":"pc-387","ftype":"field","type":"BS_SELECT_LIST","label":"Выбор месяца","title":"","css":"","source":"MONTH","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","font_size":"27","source_list":"MONTH_LIST","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-41","ftype":"field","type":"BS_BUTTON","label":"Загрузить","title":"Загрузить","tooltip":"Загрузить список на выбранный период","action":"load-list","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-791","ftype":"field","type":"BS_BUTTON","label":"Печать","title":"","tooltip":"Печать","action":"print","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","icon":"glyphicon glyphicon-print gray ","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":true,"sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"JORNAL_ROWS":[{"SERV_LIST":[{}]}],"TITLE":"","BUTTON_LIST":[{"ACT":"","TEXT":"","TOOLTIP":"","CSS":""}],"SERV_PARAM_LIST":[{"TEXT":"","TOOLTIP":"","ACT":"","CSS":""}],"YEAR_LIST":"","MONTH_LIST":""}},"DAY_EDITOR":{"formId":"dialog-day-editor","actions":[],"innerForms":[],"id":"1","code":"DAY_EDITOR","name":"Редактор дня календаря","visParams":"{}","get_":"","put_":"","delete_":"","ajax":"","parent_":"0","js":"form.data = form.params;\\n\\nform.data.SERV_LIST = form.params.SERV_LIST||[];\\nform.data.COMMENT_LIST = form.params.COMMENT_LIST||[];\\nform.data.READ_DATE = getReadDate1(new Date(form.data.FORMAT_DATE))+\' \'\\n  +getDayName(form.data.DAY);\\nconsole.log(form.data);\\nvar pObj = {};\\n_.each(sch.LISTS.SRVS.ROWS, function(p){\\n  pObj[p.SERV_CODE] = p.SERV;\\n});\\n//\\n_.each(form.data.SERV_LIST, function(r){\\n  if(r.SERV_CODE == \\"ANOTHER\\"){\\n    r.ANOTHER_SERV = r.SERV\\n  }\\n});\\nform.on(\\"change-show-in-rasp:click\\", function(data, action){\\n  data.SHOW_IN_RASP = !data.SHOW_IN_RASP;\\n  form.render();\\n});\\n\\n//изменение службы \\nform.on(\\"SERV_CODE:change\\", function(data){\\n  var serv = _.find(sch.LISTS.SRVS.ROWS, function(s){return s.SERV_CODE == data.SERV_CODE;});\\n  if(serv){\\n    //console.log(data);alert(data.SRV_DOC_NUM);\\n    if(serv.SERV_TYPE == \\"PRIVATE\\"){\\n      data.SHOW_IN_RASP = false;\\n    }\\n    if(serv.SERV_TYPE == \\"PUBLIC\\"){\\n      data.SHOW_IN_RASP = true;\\n    }\\n    var d = new Date();\\n    var m = d.getMonth();\\n    if(m < 10)m= \'0\'+m;\\n    //data.SRV_DOC_NUM = data.SERV_CODE.substring(1,-1)+d.getFullYear()+m+d.getDate()+d.getHours()+d.getMinutes()+d.getSeconds();\\n    data.SRV_DOC_NUM = data.SERV_CODE.substring(1,-1)+data.SRV_DOC_NUM.substring(1);\\n    if(data.SERV_CODE == \\"ANOTHER\\"){\\n      data.SERV = serv.ANOTHER_SERV; data.SERV_TYPE = serv.SERV_TYPE\\n    }\\n    else{\\n      if(data.SERV_CODE == \\"BAPTISMS\\"){\\n        //возрасты\\n        data.AGE_LIST = bAge;\\n        data.SEX_LIST = bSex;\\n      }\\n      if(data.SERV_CODE == \\"WEDDINGS\\"){\\n        //чин\\n        data.WEDD_TYPES_LIST = wType;\\n      }\\n      if(data.SERV_CODE == \\"FUNERAL_SERVICE\\"){\\n        //чин \\n        data.FUN_TYPES_LIST = fType;\\n        data.FUN_AGE_LIST = fAge;\\n      }\\n\\n      data.SERV = serv.SERV; data.SERV_TYPE = serv.SERV_TYPE\\n    } \\n  }\\n  form.render();\\n});\\nvar bSex = {\'M\': \'Мужской\', \'W\': \'Женский\'};\\nvar bAge = {1: \'до года\', 2: \'от года до 7 лет\', 3: \'от 7 лет до 15 лет\', 4: \'от 15 лет\'};\\nvar fAge = {1: \'взрослый(-ая)\', 2: \'младенец\'};\\nvar fType = {1: \'Очное отпевание\', 2: \'Заочное отпевание\', 3: \'Чин утешения родственников\'};\\nvar wType = {1: \'Венчание\', 2: \'Чин второбрачных\', 3: \'Чин благословления супругов\'};\\nform.on(\\"BAPT_OBJ_AGE:change\\", function(data){data.BAPT_OBJ_AGE_ = bAge[data.BAPT_OBJ_AGE]});\\nform.on(\\"BAPT_OBJ_SEX:change\\", function(data){data.BAPT_OBJ_SEX_ = bSex[data.BAPT_OBJ_SEX]});\\nform.on(\\"WEDD_TYPE:change\\",    function(data){data.WEDD_TYPE_    = wType[data.WEDD_TYPE]});\\nform.on(\\"FUN_AGE:change\\",      function(data){data.FUN_AGE_      = fAge[data.FUN_AGE]});\\nform.on(\\"FUN_TYPE:change\\",     function(data){data.FUN_TYPE_     = fType[data.FUN_TYPE]});\\n\\n//добавление службы \\nform.on(\\"add:click\\", function(data, action){\\n  var fd = form.data.FORMAT_DATE;\\n  var d = new Date(fd);\\n  var m = d.getMonth();\\n  if(m < 10)m= \'0\'+m;\\n  var srvDocNum = \'L-\'+d.getFullYear()+\'/\'+m+\'/\'+d.getDate()+\'/\'+d.getHours()+d.getMinutes()+d.getSeconds();\\n  form.data.SERV_LIST.push({\\n    SHOW_IN_RASP:true,\\n    SRV_DOC_NUM:srvDocNum,\\n    TIME: sch.SETTINGS.MORNING_SERV_TIME,  \\n    SRVS: pObj,  \\n    SERVS: \'\',  \\n    SERV_CODE: sch.SETTINGS.MORNING_SERV_CODE,  \\n    SERV_TYPE: sch.SETTINGS.MORNING_SERV_TYPE, \\n    SERVUS : sch.SETTINGS.SERVUS,\\n    ISP_CNT : \'0\',\\n    PRICH_CNT : \'0\',\\n    BAPT_OBJ : \'\',\\n    BAPT_OBJ_SEX : \'M\',\\n    BAPT_OBJ_SEX_ : \'Мужской\',\\n    BAPT_OBJ_AGE : 1,\\n    BAPT_OBJ_AGE_ : \'до года\',\\n    BAPT_F : \'\',\\n    BAPT_M : \'\',\\n    BAPT_SAINT : \'\',\\n    BAPT_SAINT_CELEBR : \'\',\\n    GROOM : \'\',\\n    BRIDE : \'\',\\n    WITNESSES : \'\',\\n    WEDD_TYPE: 1,\\n    WEDD_TYPE_: \'Венчание\',\\n    SOB_CNT : 1,\\n    DECEASED : \'\',\\n    FUN_TYPE : 1,\\n    FUN_TYPE_ : \'Очное отпевание\',\\n    FUN_AGE : 1,\\n    FUN_AGE_ : \'взрослый(-ая)\',\\n    CEMETERY : \'\'\\n  });\\n  form.data.SELECTED_LESSON_CNT = form.data.SERV_LIST.length;\\n  form.render();\\n});\\n//удаление службы\\nform.on(\\"del:click\\", function(data, action){\\n  var indx = _.indexOf(form.data.SERV_LIST, data);\\n  var arr = [];\\n  _.each(form.data.SERV_LIST, function(r,i){\\n    if(i != indx)arr.push(r);\\n  });\\n  form.data.SERV_LIST = arr;\\n  var cnt = form.data.SERV_LIST.length;\\n  if(cnt != 0){ \\n    form.data.SELECTED_LESSON_CNT = cnt;\\n  }else{\\n    form.data.SELECTED_LESSON_CNT = \'\';\\n  }\\n  form.render();\\n});\\n//добавление памятного события \\nform.on(\\"add-comment:click\\", function(data, action){\\n  //console.log(data);\\n  if(form.data.COMMENT)\\n  {form.data.COMMENT = form.data.COMMENT+\\"; \\"+data.COMMENT}\\n  else{form.data.COMMENT = data.COMMENT};\\n  form.render();\\n\\n});\\n//Заархивировать \\n\\nform.on(\\"add-arhive-rec:click\\", function(data, action){\\n  form.data.IS_ARHIVE = true;\\n  form.trigger(\\"save:click\\");\\n});\\nform.on(\\"clear-arhive-rec:click\\", function(data, action){\\n  form.data.IS_ARHIVE = false;\\n  form.render();\\n});\\n","visModel":{"id":"pc-205","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"","css":"","source_css":"","source_title":"READ_DATE","is_top_navbar":"","buttons":[{"id":"pc-68","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Обязательное событие","action":"","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"form.data.HOLYDAY","icon":"glyphicon glyphicon-ok","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-630","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Запрет на автоматическое добавление служб, снимается в редакторе калкндаря.","action":"","css":"","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"form.data.NOT_ADD_SRVS","icon":"glyphicon glyphicon-ok","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-93","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"изъять из архива","action":"clear-arhive-rec","css":"btn btn-default btn-success u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":true,"condition":"form.data.IS_ARHIVE","icon":"glyphicon glyphicon-book","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-744","ftype":"field","type":"BS_BUTTON","label":"","title":"","tooltip":"Добавить в архив","action":"add-arhive-rec","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"!form.data.IS_ARHIVE","icon":"glyphicon glyphicon-book","source_action":"","source_title":"","source_tooltip":"","source_icon":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-123","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"сохранить","tooltip":"сохранить","action":"save","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"!form.data.IS_ARHIVE","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":""},{"id":"pc-321","_type":"BUTTON_CONSTR","ftype":"field","type":"BS_BUTTON","label":"","title":"Выйти","tooltip":"Закрыть окно","action":"exit","css":"btn btn-default btn-warning u-butt","source":"","source_css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"form.data.IS_ARHIVE","icon":"","source_action":"","source_title":"","source_tooltip":"","source_icon":""}],"fields":[{"id":"pc-949","_type":"UL_CONSTR","ftype":"container","type":"DIV","label":"архив","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"form.data.IS_ARHIVE","div_id":"","text_align":"left","overflow":"auto","height":"500px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-350","ftype":"container","type":"BS_PANEL","label":"","title":"Службы","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","fields":[{"id":"pc-330","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"250px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-620","condition":"true","ftype":"array","type":"REPORT","label":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","title":"","source":"SERV_LIST","action":"","show_header":"","fields":[{"id":"pc-585","condition":"","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"INFO_JORN","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[]},{"id":"pc-260","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Памятные события","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[],"fields":[{"id":"pc-667","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"комментарий","source":"COMMENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","text":"","_type":"BUTTON_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":""}]},{"id":"pc-30","ftype":"container","type":"DIV","label":"не архив","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"!form.data.IS_ARHIVE","div_id":"","text_align":"left","overflow":"auto","height":"500px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-221","ftype":"container","type":"BS_PANEL","label":"","title":"Службы","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","fields":[{"id":"pc-955","ftype":"container","type":"DIV","label":"","title":"","css":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","condition":"true","div_id":"","text_align":"left","overflow":"auto","height":"380px","width":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-454","condition":"true","ftype":"array","type":"REPORT","label":"","title":"","source":"SERV_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"","show_header":"","fields":[{"id":"pc-800","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"100%","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-644","_type":"UL_CONSTR","ftype":"container","type":"GRID_SECTION","label":"ТРЕБЫ","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_active":"","condition":"data.SERV_TYPE ==\'PRIVATE\'","fields":[{"id":"pc-797","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"№","title":"","source":"SRV_DOC_NUM","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"10","text":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-46","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","width":"100px","source":"TIME","required":"","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-586","condition":"","ftype":"container","type":"DIV","label":"","title":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"8","_type":"UL_CONSTR","_active":"","css":"","width":"100%","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0 0 10px 0","padding":"0px","fields":[{"id":"pc-444","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"27","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-722","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"200px","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","_type":"UL_CONSTR","_active":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-192","condition":"data.SHOW_IN_RASP","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","action":"change-show-in-rasp","tooltip":"показывать в расписании","source_title":"","source_tooltip":"","icon":"glyphicon glyphicon-eye-open","css":"","source_action":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-784","condition":"!data.SHOW_IN_RASP","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","_type":"BUTTON_CONSTR","_active":"","action":"change-show-in-rasp","tooltip":"скрывать в расписании","source_title":"","source_tooltip":"","icon":"glyphicon glyphicon-eye-close","css":"","source_action":"","source_icon":"","source_css":""}]},{"id":"pc-873","condition":"","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","action":"del","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-259","condition":"","ftype":"field","type":"BS_TEXT","label":"Служащий","title":"","width":"100%","source":"SERVUS","required":"","grid_start_new_row":"true","grid_label_cols":"2","grid_field_cols":"10","placeholder":"","mask":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-650","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Крестился"},{"id":"pc-366","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_TEXT","label":"Крестился","title":"","source":"BAPT_OBJ","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","width":"100%","placeholder":"","required":"","mask":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-993","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Пол"},{"id":"pc-839","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_SELECT_LIST","label":"Пол","title":"","source":"BAPT_OBJ_SEX","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","font_size":"27","css":"","source_css":"","source_list":"SEX_LIST","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-220","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Возраст"},{"id":"pc-58","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_SELECT_LIST","label":"Возраст","title":"","source":"BAPT_OBJ_AGE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"6","font_size":"27","css":"","source_css":"","source_list":"AGE_LIST","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-626","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Крестный"},{"id":"pc-464","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_TEXT","label":"Крестный","title":"","width":"100%","source":"BAPT_F","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-896","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Крестная"},{"id":"pc-181","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_TEXT","label":"Крестная","title":"","width":"100%","source":"BAPT_M","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-975","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Святой"},{"id":"pc-599","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"BS_TEXT","label":"Святой","title":"","width":"100%","source":"BAPT_SAINT","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"5","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-847","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","text":"Празднуется","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-376","condition":"data.SERV_CODE == \'BAPTISMS\'","ftype":"field","type":"DATE","label":"Празднуется","title":"","width":"100%","source":"BAPT_SAINT_CELEBR","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"3","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-49","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Жених"},{"id":"pc-850","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"BS_TEXT","label":"Жених","title":"","width":"100%","source":"GROOM","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-404","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Невеста"},{"id":"pc-218","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"BS_TEXT","label":"Невеста","title":"","width":"100%","source":"BRIDE","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-591","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Свидетели"},{"id":"pc-468","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"BS_TEXT","label":"Свидетели","title":"","width":"100%","source":"WITNESSES","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-256","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Чин"},{"id":"pc-217","condition":"data.SERV_CODE == \'WEDDINGS\'","ftype":"field","type":"BS_SELECT_LIST","label":"Чин","title":"","source":"WEDD_TYPE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","font_size":"27","css":"","source_css":"","source_list":"WEDD_TYPES_LIST","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-342","condition":"data.SERV_CODE == \'SOB\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Количество"},{"id":"pc-391","condition":"data.SERV_CODE == \'SOB\'","ftype":"field","type":"BS_TEXT","label":"количество","title":"","width":"100%","source":"SOB_CNT","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":"9?99"},{"id":"pc-358","condition":"data.SERV_CODE == \'SOB\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"1","_type":"BUTTON_CONSTR","_active":"","text":"(чел.)"},{"id":"pc-896","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Покойник(-ца)"},{"id":"pc-228","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"BS_TEXT","label":"Покойник(-ца)","title":"","width":"100%","source":"DECEASED","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-866","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Возраст"},{"id":"pc-78","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"BS_SELECT_LIST","label":"Возраст","title":"","source":"FUN_AGE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","font_size":"27","css":"","source_css":"","source_list":"FUN_AGE_LIST"},{"id":"pc-672","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Кладбище"},{"id":"pc-185","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"BS_TEXT","label":"Кладбище","title":"","width":"100%","source":"CEMETERY","required":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":""},{"id":"pc-311","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"true","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","text":"Чин"},{"id":"pc-758","condition":"data.SERV_CODE == \'FUNERAL_SERVICE\'","ftype":"field","type":"BS_SELECT_LIST","label":"Чин","title":"","source":"FUN_TYPE","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","font_size":"27","css":"","source_css":"","source_list":"FUN_TYPES_LIST"}]},{"id":"pc-847","condition":"data.SERV_TYPE ==\'PUBLIC\' || data.SERV_TYPE == \'ANOTHER\'","ftype":"container","type":"GRID_SECTION","label":"СЛУЖБЫ","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","fields":[{"id":"pc-938","condition":"true","ftype":"field","type":"TEXT_DISPLAY","label":"№","title":"","source":"SRV_DOC_NUM","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"10","_type":"BUTTON_CONSTR","_active":"","text":""},{"id":"pc-73","condition":"true","ftype":"field","type":"TIME","label":"Время","title":"","width":"100px","source":"TIME","required":"","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","tooltip":"Время службы"},{"id":"pc-488","condition":"","ftype":"container","type":"DIV","label":"Служба","title":"","width":"100%","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"8","_type":"UL_CONSTR","_active":"","css":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","fields":[{"id":"pc-362","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"100%","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0 0 10px 0","padding":"0px","css":"","fields":[{"id":"pc-559","condition":"true","ftype":"field","type":"BS_SELECT_LIST","label":"Служба","title":"","source":"SERV_CODE","grid_start_new_row":"","grid_label_cols":"2","grid_field_cols":"3","source_list":"SRVS","font_size":"27","css":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-800","condition":"data.SERV_CODE == \'ANOTHER\'","ftype":"field","type":"BS_TEXT","label":"","title":"","width":"200px","source":"ANOTHER_SERV","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","placeholder":"","mask":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-536","condition":"","ftype":"container","type":"DIV","label":"","title":"","width":"200px","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","div_id":"","text_align":"left","overflow":"hidden","height":"100%","margin":"0px","padding":"0px","css":"","fields":[{"id":"pc-615","condition":"data.SHOW_IN_RASP","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","action":"change-show-in-rasp","tooltip":"показывать в расписании","source_title":"","source_tooltip":"","icon":"glyphicon glyphicon-eye-open","css":"","source_action":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-563","condition":"!data.SHOW_IN_RASP","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"1","_type":"BUTTON_CONSTR","_active":"","action":"change-show-in-rasp","tooltip":"скрывать в расписании","source_title":"","source_tooltip":"","icon":"glyphicon glyphicon-eye-close","css":"","source_action":"","source_icon":"","source_css":""}],"_type":"UL_CONSTR","_active":""},{"id":"pc-262","condition":"","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"1","action":"del","tooltip":"удалить","icon":"glyphicon glyphicon-remove gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-947","condition":"","ftype":"field","type":"BS_TEXT","label":"Служащий","title":"","width":"100%","source":"SERVUS","required":"","grid_start_new_row":"true","grid_label_cols":"","grid_field_cols":"6","placeholder":"","mask":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-997","condition":"(data.SERV_CODE== \'LIT\')||(data.SERV_CODE== \'LIT1\')||(data.SERV_CODE== \'LIT2\')||(data.SERV_CODE== \'LIT3\')","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"1","text":"Исп.","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-652","condition":"(data.SERV_CODE== \'LIT\')||(data.SERV_CODE== \'LIT1\')||(data.SERV_CODE== \'LIT2\')||(data.SERV_CODE== \'LIT3\')","ftype":"field","type":"BS_TEXT","label":"","title":"Исповедовавшиеся","width":"100px","source":"ISP_CNT","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","_type":"BUTTON_CONSTR","_active":"","placeholder":"","mask":"9?99"},{"id":"pc-258","condition":"(data.SERV_CODE== \'LIT\')||(data.SERV_CODE== \'LIT1\')||(data.SERV_CODE== \'LIT2\')||(data.SERV_CODE== \'LIT3\')","ftype":"field","type":"TEXT_DISPLAY","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"1","_type":"BUTTON_CONSTR","_active":"","text":"Прич."},{"id":"pc-386","condition":"(data.SERV_CODE== \'LIT\')||(data.SERV_CODE== \'LIT1\')||(data.SERV_CODE== \'LIT2\')||(data.SERV_CODE== \'LIT3\')","ftype":"field","type":"BS_TEXT","label":"","title":"Причастившиеся","width":"100px","source":"PRICH_CNT","required":"","grid_start_new_row":"","grid_label_cols":"0","grid_field_cols":"2","placeholder":"","mask":"9?99","_type":"BUTTON_CONSTR","_active":""}]}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"_type":"PANEL_CONSTR","_active":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[{"id":"pc-605","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add","tooltip":"добавить строку","icon":"glyphicon glyphicon-plus gray ","css":"","source_action":"","source_title":"","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}]},{"id":"pc-130","condition":"true","ftype":"container","type":"BS_PANEL","label":"","title":"Памятные события","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","css":"","hide_header":"","source_css":"","source_title":"","is_top_navbar":"","buttons":[],"fields":[{"id":"pc-882","condition":"true","ftype":"field","type":"TEXT_AREA","label":"","title":"комментарий","source":"COMMENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","width":"100%","required":"","_type":"BUTTON_CONSTR","_active":""},{"id":"pc-336","condition":"true","ftype":"array","type":"REPORT","label":"","title":"","source":"COMMENT_LIST","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"UL_CONSTR","_active":"","action":"","show_header":"","fields":[{"id":"pc-91","condition":"true","ftype":"field","type":"BS_BUTTON","label":"","title":"","source":"COMMENT","grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","action":"add-comment","tooltip":"добавить","icon":"","css":"btn btn-text","source_action":"","source_title":"COMMENT","source_tooltip":"","source_icon":"","source_css":"","_type":"BUTTON_CONSTR","_active":""}]}],"_type":"PANEL_CONSTR","_active":""}],"_type":"UL_CONSTR","_active":""}],"grid_start_new_row":"","grid_label_cols":"","grid_field_cols":"","_type":"PANEL_CONSTR","_active":"","hide_header":"","sourceName":"","data":"sch.Forms[sch.currentFormId].data"},"dataModel":{"READ_DATE":"","SERV_LIST":[{"SRVS":"","SEX_LIST":"","AGE_LIST":"","WEDD_TYPES_LIST":"","FUN_AGE_LIST":"","FUN_TYPES_LIST":""}],"COMMENT_LIST":[{"COMMENT":""}]}}}');